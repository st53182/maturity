"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[991],{8991:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var l=a(6768),o=a(4232),s=a(5130);const i={class:"motivation-container"},r={class:"employee-list"},n=["onClick"],u=["src"],d={class:"card-header"},m=["onClick"],c={class:"team-name"},p={class:"disc-type"},k={key:0,class:"factors"},h={class:"column"},f={class:"column"},y={key:0,class:"modal-overlay"},v={class:"modal-content"},L=["value"],b=["disabled"],C={key:0,class:"result-block"},_=["innerHTML"];function g(e,t,a,g,E,w){return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",i,[t[14]||(t[14]=(0,l.Lk)("h1",null,"ðŸŽ¯ ÐœÐ¾Ñ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°",-1)),(0,l.Lk)("div",r,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(E.employees,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"employee-card",onClick:t=>w.selectEmployee(e)},[(0,l.Lk)("img",{class:"avatar",src:w.getAvatarUrl(e.ai_analysis),alt:"avatar",onError:t[0]||(t[0]=(...e)=>w.setDefaultAvatar&&w.setDefaultAvatar(...e))},null,40,u),(0,l.Lk)("div",d,[(0,l.Lk)("h4",null,(0,o.v_)(e.name),1),(0,l.Lk)("button",{onClick:(0,s.D$)((t=>w.deleteEmployee(e.id)),["stop"])},"ðŸ—‘",8,m)]),(0,l.Lk)("p",c,"ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: "+(0,o.v_)(w.getTeamName(e.team_id)||"â€”"),1),(0,l.Lk)("span",p,(0,o.v_)(w.extractDISCType(e.ai_analysis)),1),e.ai_analysis?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.Lk)("div",h,[t[11]||(t[11]=(0,l.Lk)("h5",null,"â¬†ï¸ ÐœÐ¾Ñ‚Ð¸Ð²Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ðµ",-1)),(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.motivators,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,o.v_)(e),1)))),128))])]),(0,l.Lk)("div",f,[t[12]||(t[12]=(0,l.Lk)("h5",null,"â¬‡ï¸ Ð”ÐµÐ¼Ð¾Ñ‚Ð¸Ð²Ð°Ñ‚Ð¾Ñ€Ñ‹",-1)),(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.demotivators,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,o.v_)(e),1)))),128))])])])):(0,l.Q3)("",!0)],8,n)))),128)),(0,l.Lk)("div",{class:"employee-card add-card",onClick:t[1]||(t[1]=(...e)=>w.resetForm&&w.resetForm(...e))},t[13]||(t[13]=[(0,l.Lk)("span",null,"âž•",-1),(0,l.Lk)("p",null,"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ",-1)]))])]),E.showModal?((0,l.uX)(),(0,l.CE)("div",y,[(0,l.Lk)("div",v,[(0,l.Lk)("button",{class:"modal-close",onClick:t[2]||(t[2]=e=>E.showModal=!1)},"âœ–"),(0,l.Lk)("form",{onSubmit:t[10]||(t[10]=(0,s.D$)(((...e)=>w.submitMotivation&&w.submitMotivation(...e)),["prevent"])),class:"form-group"},[t[17]||(t[17]=(0,l.Lk)("h2",{style:{"text-align":"center"}},"ðŸ“ ÐÐ½ÐºÐµÑ‚Ð° ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°",-1)),t[18]||(t[18]=(0,l.Lk)("label",null,"Ð˜Ð¼Ñ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>E.form.name=e),required:""},null,512),[[s.Jo,E.form.name]]),t[19]||(t[19]=(0,l.Lk)("label",null,"Ð”Ð¾Ð»Ð¶Ð½Ð¾ÑÑ‚ÑŒ:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>E.form.role=e),required:""},null,512),[[s.Jo,E.form.role]]),t[20]||(t[20]=(0,l.Lk)("label",null,"ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>E.form.team_id=e),required:""},[t[15]||(t[15]=(0,l.Lk)("option",{disabled:"",value:""},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(E.teams,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.name),9,L)))),128))],512),[[s.u1,E.form.team_id]]),t[21]||(t[21]=(0,l.Lk)("label",null,"1. ÐŸÐ¾Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ Ð² ÑÑ‚Ñ€ÐµÑÑÐ¾Ð²Ð¾Ð¹ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¸",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>E.form.stress=e),required:""},null,512),[[s.Jo,E.form.stress]]),t[22]||(t[22]=(0,l.Lk)("label",null,"2. Ð’Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ñ Ð´Ñ€ÑƒÐ³Ð¸Ð¼Ð¸",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>E.form.communication=e),required:""},null,512),[[s.Jo,E.form.communication]]),t[23]||(t[23]=(0,l.Lk)("label",null,"3. ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>E.form.behavior=e),required:""},null,512),[[s.Jo,E.form.behavior]]),t[24]||(t[24]=(0,l.Lk)("label",null,"4. Ð ÐµÐ°ÐºÑ†Ð¸Ð¸ Ð½Ð° ÐºÑ€Ð¸Ñ‚Ð¸ÐºÑƒ Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[9]||(t[9]=e=>E.form.feedback=e),required:""},null,512),[[s.Jo,E.form.feedback]]),(0,l.Lk)("button",{type:"submit",disabled:E.loading},(0,o.v_)(E.loading?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸"),9,b),E.result?((0,l.uX)(),(0,l.CE)("div",C,[t[16]||(t[16]=(0,l.Lk)("h2",null,"ðŸ“‹ Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸",-1)),(0,l.Lk)("div",{class:"ai-analysis",innerHTML:E.result},null,8,_)])):(0,l.Q3)("",!0)],32)])])):(0,l.Q3)("",!0)],64)}a(4114),a(8111),a(2489),a(116),a(1701);var E={data(){return{form:{id:null,name:"",role:"",team_id:"",stress:"",communication:"",behavior:"",feedback:""},teams:[],employees:[],result:"",loading:!1,showModal:!1}},async mounted(){const e=localStorage.getItem("token"),t=await fetch("/user_teams",{headers:{Authorization:`Bearer ${e}`}});this.teams=await t.json();const a=await fetch("/employees"),l=await a.json();this.employees=l.map((e=>({...e,motivators:this.extractFactors(e.ai_analysis,"ÐœÐ¾Ñ‚Ð¸Ð²Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ðµ"),demotivators:this.extractFactors(e.ai_analysis,"Ð”ÐµÐ¼Ð¾Ñ‚Ð¸Ð²Ð°Ñ‚Ð¾Ñ€Ñ‹")})))},methods:{async submitMotivation(){this.loading=!0;try{const e=await fetch("/motivation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.form)}),t=await e.json();if(e.ok){this.result=t.analysis,this.form.id=t.employee_id;const e={...this.form,id:t.employee_id,ai_analysis:t.analysis,motivators:this.extractFactors(t.analysis,"ÐœÐ¾Ñ‚Ð¸Ð²Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ðµ"),demotivators:this.extractFactors(t.analysis,"Ð”ÐµÐ¼Ð¾Ñ‚Ð¸Ð²Ð°Ñ‚Ð¾Ñ€Ñ‹")},a=this.employees.findIndex((e=>e.id===t.employee_id));-1!==a?this.employees.splice(a,1,e):this.employees.push(e),this.showModal=!1}else alert(t.error)}catch(e){alert("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ")}finally{this.loading=!1}},resetForm(){this.form={id:null,name:"",role:"",team_id:"",stress:"",communication:"",behavior:"",feedback:""},this.result="",this.showModal=!0},async deleteEmployee(e){confirm("Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°?")&&(await fetch(`/employee/${e}`,{method:"DELETE"}),this.employees=this.employees.filter((t=>t.id!==e)))},selectEmployee(e){this.form={...e},this.result=e.ai_analysis,this.showModal=!0},extractFactors(e,t){if(!e)return[];const a=document.createElement("div");a.innerHTML=e;const l=Array.from(a.querySelectorAll("h3, h4, strong")),o=l.find((e=>e.textContent.toLowerCase().includes(t.toLowerCase())));if(!o)return[];const s=o.nextElementSibling;return s&&"UL"===s.tagName?Array.from(s.querySelectorAll("li")).map((e=>e.textContent.trim())):[]},extractDISCType(e){if(!e||!Array.isArray(this.discProfiles))return"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾";const t=e.match(/\b([DISC])\b/i);if(!t)return"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾";const a=t[1].toUpperCase(),l=this.discProfiles.find((e=>e.type===a));return l?`${a} (${l.title})`:a},getTeamName(e){const t=this.teams.find((t=>t.id===e));return t?t.name:"â€”"},getAvatarUrl(e){const t=this.extractDISCType(e),a=t?.toLowerCase().split(" ")[0].replace(/[^\w]/g,"");return`/avatars/${a||"default"}.png`},setDefaultAvatar(e){e.target.src="/avatars/default.png"}}},w=a(1241);const x=(0,w.A)(E,[["render",g],["__scopeId","data-v-d3ed5b0c"]]);var A=x}}]);
//# sourceMappingURL=991.1580d9af.js.map