"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[227],{2227:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var l=a(6768),o=a(4232),s=a(5130);const r={class:"motivation-container"},i={class:"employee-list"},n=["onClick"],m=["src"],u={class:"card-header"},d=["onClick"],c={class:"team-name"},p={class:"disc-type"},k={key:0,class:"factors"},f={class:"column"},h={class:"column"},y={class:"form-group"},v=["value"],L={class:"form-group"},b=["disabled"],C={key:0,class:"result-block"},_=["innerHTML"];function g(e,t,a,g,E,x){return(0,l.uX)(),(0,l.CE)("div",r,[t[22]||(t[22]=(0,l.Lk)("h1",null,"üéØ –ú–æ—Ç–∏–≤–∞—Ü–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞",-1)),(0,l.Lk)("div",i,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(E.employees,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"employee-card",onClick:t=>x.selectEmployee(e)},[(0,l.Lk)("img",{class:"avatar",src:x.getAvatarUrl(e.ai_analysis),alt:"avatar",onError:t[0]||(t[0]=(...e)=>x.setDefaultAvatar&&x.setDefaultAvatar(...e))},null,40,m),(0,l.Lk)("div",u,[(0,l.Lk)("h4",null,(0,o.v_)(e.name),1),(0,l.Lk)("button",{onClick:(0,s.D$)((t=>x.deleteEmployee(e.id)),["stop"])},"üóë",8,d)]),(0,l.Lk)("p",c,"–ö–æ–º–∞–Ω–¥–∞: "+(0,o.v_)(x.getTeamName(e.team_id)||"‚Äî"),1),(0,l.Lk)("span",p,(0,o.v_)(x.extractDISCType(e.ai_analysis)),1),e.ai_analysis?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.Lk)("div",f,[t[10]||(t[10]=(0,l.Lk)("h5",null,"‚¨ÜÔ∏è –ú–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–µ",-1)),(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.motivators,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,o.v_)(e),1)))),128))])]),(0,l.Lk)("div",h,[t[11]||(t[11]=(0,l.Lk)("h5",null,"‚¨áÔ∏è –î–µ–º–æ—Ç–∏–≤–∞—Ç–æ—Ä—ã",-1)),(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.demotivators,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,o.v_)(e),1)))),128))])])])):(0,l.Q3)("",!0)],8,n)))),128)),(0,l.Lk)("div",{class:"employee-card add-card",onClick:t[1]||(t[1]=(...e)=>x.resetForm&&x.resetForm(...e))},t[12]||(t[12]=[(0,l.Lk)("span",null,"‚ûï",-1),(0,l.Lk)("p",null,"–°–æ–∑–¥–∞—Ç—å",-1)]))]),(0,l.Lk)("form",{onSubmit:t[9]||(t[9]=(0,s.D$)(((...e)=>x.submitMotivation&&x.submitMotivation(...e)),["prevent"]))},[(0,l.Lk)("div",y,[t[14]||(t[14]=(0,l.Lk)("label",null,"–ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>E.form.name=e),placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",required:""},null,512),[[s.Jo,E.form.name]]),t[15]||(t[15]=(0,l.Lk)("label",null,"–î–æ–ª–∂–Ω–æ—Å—Ç—å:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>E.form.role=e),placeholder:"–ê–Ω–∞–ª–∏—Ç–∏–∫, –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫...",required:""},null,512),[[s.Jo,E.form.role]]),t[16]||(t[16]=(0,l.Lk)("label",null,"–ö–æ–º–∞–Ω–¥–∞:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>E.form.team_id=e),required:""},[t[13]||(t[13]=(0,l.Lk)("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(E.teams,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.name),9,v)))),128))],512),[[s.u1,E.form.team_id]])]),(0,l.Lk)("div",L,[t[17]||(t[17]=(0,l.Lk)("label",null,"1. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Å—Ç—Ä–µ—Å—Å–æ–≤–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>E.form.stress=e),placeholder:"–ö–∞–∫ –æ–Ω —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –¥–∞–≤–ª–µ–Ω–∏–µ, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã...",required:""},null,512),[[s.Jo,E.form.stress]]),t[18]||(t[18]=(0,l.Lk)("label",null,"2. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –¥—Ä—É–≥–∏–º–∏",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>E.form.communication=e),placeholder:"–û—Ç–∫—Ä—ã—Ç—ã–π, —Å–¥–µ—Ä–∂–∞–Ω–Ω—ã–π, –∫–æ–º–∞–Ω–¥–Ω—ã–π –∏–≥—Ä–æ–∫?",required:""},null,512),[[s.Jo,E.form.communication]]),t[19]||(t[19]=(0,l.Lk)("label",null,"3. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Ä–∞–±–æ—Ç–µ",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>E.form.behavior=e),placeholder:"–ü–æ–¥—Ö–æ–¥ –∫ –∑–∞–¥–∞—á–∞–º, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å...",required:""},null,512),[[s.Jo,E.form.behavior]]),t[20]||(t[20]=(0,l.Lk)("label",null,"4. –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∫—Ä–∏—Ç–∏–∫—É –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>E.form.feedback=e),placeholder:"–ö–∞–∫ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å...",required:""},null,512),[[s.Jo,E.form.feedback]])]),(0,l.Lk)("button",{type:"submit",disabled:E.loading},(0,o.v_)(E.loading?"–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º...":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"),9,b)],32),E.result?((0,l.uX)(),(0,l.CE)("div",C,[t[21]||(t[21]=(0,l.Lk)("h2",null,"üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏",-1)),(0,l.Lk)("div",{class:"ai-analysis",innerHTML:E.result},null,8,_)])):(0,l.Q3)("",!0)])}a(4114),a(8111),a(2489),a(116),a(1701);var E={data(){return{form:{id:null,name:"",role:"",team_id:"",stress:"",communication:"",behavior:"",feedback:""},teams:[],employees:[],result:"",loading:!1}},async mounted(){const e=localStorage.getItem("token"),t=await fetch("/user_teams",{headers:{Authorization:`Bearer ${e}`}});this.teams=await t.json();const a=await fetch("/employees"),l=await a.json();this.employees=l.map((e=>({...e,motivators:this.extractFactors(e.ai_analysis,"–ú–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–µ"),demotivators:this.extractFactors(e.ai_analysis,"–î–µ–º–æ—Ç–∏–≤–∞—Ç–æ—Ä—ã")})))},methods:{async submitMotivation(){this.loading=!0;try{const e=await fetch("/motivation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.form)}),t=await e.json();if(e.ok){this.result=t.analysis,this.form.id=t.employee_id;const e={...this.form,id:t.employee_id,ai_analysis:t.analysis,motivators:this.extractFactors(t.analysis,"–ú–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–µ"),demotivators:this.extractFactors(t.analysis,"–î–µ–º–æ—Ç–∏–≤–∞—Ç–æ—Ä—ã")},a=this.employees.findIndex((e=>e.id===t.employee_id));-1!==a?this.employees.splice(a,1,e):this.employees.push(e)}else alert(t.error)}catch(e){alert("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è")}finally{this.loading=!1}},resetForm(){this.form={id:null,name:"",role:"",team_id:"",stress:"",communication:"",behavior:"",feedback:""},this.result=""},async deleteEmployee(e){confirm("–£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞?")&&(await fetch(`/employee/${e}`,{method:"DELETE"}),this.employees=this.employees.filter((t=>t.id!==e)))},selectEmployee(e){this.form={...e},this.result=e.ai_analysis},extractFactors(e,t){if(!e)return[];const a=document.createElement("div");a.innerHTML=e;const l=Array.from(a.querySelectorAll("h3, h4, strong")),o=l.find((e=>e.textContent.toLowerCase().includes(t.toLowerCase())));if(!o)return[];const s=o.nextElementSibling;return s&&"UL"===s.tagName?Array.from(s.querySelectorAll("li")).map((e=>e.textContent.trim())):[]},extractDISCType(e){if(!e)return"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ";const t=e.match(/–¢–∏–ø DISC[:-]?\s*(?:<\/strong>)?\s*([A-Z–ê-–Ø]\s*\(.*?\)|[A-Z–ê-–Ø]\s*[-‚Äì‚Äî]?\s*[^<\n]*)/i);if(t)return t[1].replace(/<\/?[^>]+>/g,"").trim();const a=e.match(/(–¢–∏–ø DISC.*?:.*?)<br/);return a?a[1].split(":")[1].trim():"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"},getTeamName(e){const t=this.teams.find((t=>t.id===e));return t?t.name:"‚Äî"},getAvatarUrl(e){const t=this.extractDISCType(e),a=t?.toLowerCase().split(" ")[0].replace(/[^\w]/g,"");return`/avatars/${a||"default"}.png`},setDefaultAvatar(e){e.target.src="/avatars/default.png"}}},x=a(1241);const w=(0,x.A)(E,[["render",g],["__scopeId","data-v-b41d0444"]]);var A=w}}]);
//# sourceMappingURL=227.de8816e7.js.map