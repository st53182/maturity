"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[215],{215:function(e,s,t){t.r(s),t.d(s,{default:function(){return A}});var a=t(6768),r=t(4232),l=t(5130);const c={class:"surveys-container"},u={class:"create-survey-section"},i={class:"survey-type-selection"},n={key:0,class:"survey-form"},o=["placeholder"],y={value:""},v=["value"],d={value:""},p=["value"],h=["disabled"],k={class:"existing-surveys"},m={key:0,class:"loading"},T={key:1,class:"no-surveys"},C={key:2,class:"surveys-grid"},L={class:"survey-header"},g={class:"survey-type"},E={class:"survey-stats"},_={class:"survey-actions"},$=["onClick"],f=["onClick"];function I(e,s,t,I,w,S){return(0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("h1",null,"üìã "+(0,r.v_)(e.$t("surveys.title")),1),(0,a.Lk)("div",u,[(0,a.Lk)("h2",null,(0,r.v_)(e.$t("surveys.createSurvey")),1),(0,a.Lk)("div",i,[(0,a.Lk)("div",{class:(0,r.C4)(["survey-type-card",{active:"enps"===w.selectedType}]),onClick:s[0]||(s[0]=e=>w.selectedType="enps")},[(0,a.Lk)("h3",null,"üìä "+(0,r.v_)(e.$t("surveys.enpsTitle")),1),s[6]||(s[6]=(0,a.Lk)("p",null,"–°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≤ –∫–æ–º–∞–Ω–¥–µ",-1))],2),(0,a.Lk)("div",{class:(0,r.C4)(["survey-type-card",{active:"360"===w.selectedType}]),onClick:s[1]||(s[1]=e=>w.selectedType="360")},[(0,a.Lk)("h3",null,"üîÑ "+(0,r.v_)(e.$t("surveys.feedback360Title")),1),s[7]||(s[7]=(0,a.Lk)("p",null,"–°–æ–±—Ä–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ –æ—Ç –∫–æ–ª–ª–µ–≥",-1))],2)]),w.selectedType?((0,a.uX)(),(0,a.CE)("div",n,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>w.surveyTitle=e),placeholder:e.$t("surveys.surveyTitle"),class:"survey-input"},null,8,o),[[l.Jo,w.surveyTitle]]),"enps"===w.selectedType?(0,a.bo)(((0,a.uX)(),(0,a.CE)("select",{key:0,"onUpdate:modelValue":s[3]||(s[3]=e=>w.selectedTeamId=e),class:"survey-select"},[(0,a.Lk)("option",y,(0,r.v_)(e.$t("surveys.selectTeam")),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(w.teams,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,v)))),128))],512)),[[l.u1,w.selectedTeamId]]):(0,a.Q3)("",!0),"360"===w.selectedType?(0,a.bo)(((0,a.uX)(),(0,a.CE)("select",{key:1,"onUpdate:modelValue":s[4]||(s[4]=e=>w.selectedEmployeeId=e),class:"survey-select"},[(0,a.Lk)("option",d,(0,r.v_)(e.$t("surveys.selectEmployee")),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(w.employees,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,p)))),128))],512)),[[l.u1,w.selectedEmployeeId]]):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:s[5]||(s[5]=(...e)=>S.createSurvey&&S.createSurvey(...e)),disabled:!S.canCreateSurvey,class:"create-survey-btn"},(0,r.v_)(e.$t("surveys.createAndSend")),9,h)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",k,[s[8]||(s[8]=(0,a.Lk)("h2",null,"–ú–æ–∏ –æ–ø—Ä–æ—Å–Ω–∏–∫–∏",-1)),w.loading?((0,a.uX)(),(0,a.CE)("div",m,"‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...")):0===w.surveys.length?((0,a.uX)(),(0,a.CE)("div",T," –ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ–ø—Ä–æ—Å–Ω–∏–∫–æ–≤ ")):((0,a.uX)(),(0,a.CE)("div",C,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(w.surveys,(s=>((0,a.uX)(),(0,a.CE)("div",{key:s.id,class:"survey-card"},[(0,a.Lk)("div",L,[(0,a.Lk)("h3",null,(0,r.v_)(s.title),1),(0,a.Lk)("span",g,(0,r.v_)(s.survey_type.toUpperCase()),1)]),(0,a.Lk)("div",E,[(0,a.Lk)("span",null,(0,r.v_)(e.$t("surveys.responses"))+": "+(0,r.v_)(s.response_count),1),(0,a.Lk)("span",{class:(0,r.C4)(["survey-status",s.status])},(0,r.v_)(e.$t(`surveys.surveyStatus.${s.status}`)),3)]),(0,a.Lk)("div",_,[(0,a.Lk)("button",{onClick:e=>S.viewResults(s.id),class:"view-results-btn"}," üìä "+(0,r.v_)(e.$t("surveys.analytics")),9,$),(0,a.Lk)("button",{onClick:e=>S.copySurveyLink(s),class:"copy-link-btn"}," üîó "+(0,r.v_)(e.$t("surveys.copyLink")),9,f)])])))),128))]))])])}t(4114);var w=t(4373),S={name:"SurveyList",data(){return{selectedType:"",surveyTitle:"",selectedTeamId:"",selectedEmployeeId:"",teams:[],employees:[],surveys:[],loading:!1}},computed:{canCreateSurvey(){return this.surveyTitle&&("enps"===this.selectedType&&this.selectedTeamId||"360"===this.selectedType&&this.selectedEmployeeId)}},async mounted(){await this.fetchTeams(),await this.fetchEmployees(),await this.fetchSurveys()},methods:{async fetchTeams(){try{const e=localStorage.getItem("token"),s=await w.A.get("/user_teams",{headers:{Authorization:`Bearer ${e}`}});this.teams=s.data}catch(e){console.error("Error fetching teams:",e)}},async fetchEmployees(){try{const e=localStorage.getItem("token"),s=await w.A.get("/api/employees",{headers:{Authorization:`Bearer ${e}`}});this.employees=s.data}catch(e){console.error("Error fetching employees:",e)}},async fetchSurveys(){try{this.loading=!0;const e=localStorage.getItem("token"),s=await w.A.get("/api/surveys",{headers:{Authorization:`Bearer ${e}`}});this.surveys=s.data}catch(e){console.error("Error fetching surveys:",e)}finally{this.loading=!1}},async createSurvey(){try{const e=localStorage.getItem("token"),s={survey_type:this.selectedType,title:this.surveyTitle,team_id:this.selectedTeamId||null,target_employee_id:this.selectedEmployeeId||null},t=await w.A.post("/api/surveys",s,{headers:{Authorization:`Bearer ${e}`}}),a=t.data.access_token,r=`${window.location.origin}/survey/${a}`;alert(`${this.$t("surveys.surveyCreated")}\n\n–°—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø—Ä–æ—Å: ${r}`),this.selectedType="",this.surveyTitle="",this.selectedTeamId="",this.selectedEmployeeId="",await this.fetchSurveys()}catch(e){console.error("Error creating survey:",e),alert("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø—Ä–æ—Å–Ω–∏–∫–∞")}},viewResults(e){this.$router.push(`/survey/${e}/results`)},async copySurveyLink(e){try{const s=`${window.location.origin}/survey/${e.access_token}`;await navigator.clipboard.writeText(s),alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!")}catch(s){console.error("Error copying link:",s)}}}},b=t(1241);const X=(0,b.A)(S,[["render",I],["__scopeId","data-v-a2dda122"]]);var A=X}}]);
//# sourceMappingURL=215.a87cc6b0.js.map