"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[900],{8900:function(t,n,i){i.r(n),i.d(n,{default:function(){return y}});var o=i(6768),e=i(4232),l=i(5130);const s={class:"poker-wrapper"},a={class:"poker-title"},r={key:0,class:"card poker-card"},p={key:1,class:"card poker-card"},c={class:"joined-info"},d={class:"sp-buttons"},u=["onClick"],h={class:"participants-box"},k={key:0},m={key:1},v={key:0,class:"hints-box"};function P(t,n,i,P,I,b){return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("h1",a,"üÉè Planning Poker ‚Äî –ö–æ–º–Ω–∞—Ç–∞ "+(0,e.v_)(I.roomId),1),I.joined?((0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("div",c,[n[6]||(n[6]=(0,o.eW)("üë§ ")),(0,o.Lk)("strong",null,(0,e.v_)(I.name),1),(0,o.eW)(" ("+(0,e.v_)(I.role)+")",1)]),n[9]||(n[9]=(0,o.Lk)("h2",null,"üìå –í—ã–±–µ—Ä–∏—Ç–µ Story Point",-1)),(0,o.Lk)("div",d,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(I.storyPoints,(t=>((0,o.uX)(),(0,o.CE)("button",{key:t,onClick:n=>b.selectSP(t),class:(0,e.C4)(["sp-btn",{selected:I.selectedSP===t}])},(0,e.v_)(t),11,u)))),128))]),(0,o.Lk)("div",h,[n[7]||(n[7]=(0,o.Lk)("h3",null,"üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(I.participants,(t=>((0,o.uX)(),(0,o.CE)("li",{key:t.id},[(0,o.Lk)("strong",null,(0,e.v_)(t.name),1),(0,o.eW)(" ("+(0,e.v_)(t.role)+") ‚Äî ",1),I.votesVisible?((0,o.uX)(),(0,o.CE)("span",k,(0,e.v_)(t.voted?t.points+" SP":"‚Äî ‚ùå –ù–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª"),1)):((0,o.uX)(),(0,o.CE)("span",m,(0,e.v_)(t.voted?"üîí –û—Ü–µ–Ω–∫–∞ —Å–∫—Ä—ã—Ç–∞":"‚ùå –ù–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª"),1))])))),128))]),I.votesVisible?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-purple",onClick:n[3]||(n[3]=t=>I.votesVisible=!0)}," üëÅ –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ü–µ–Ω–∫–∏ "))]),I.hints.length?((0,o.uX)(),(0,o.CE)("div",v,[n[8]||(n[8]=(0,o.Lk)("h3",null,"üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏:",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(I.hints,((t,n)=>((0,o.uX)(),(0,o.CE)("li",{key:n},"‚Äî "+(0,e.v_)(t.story),1)))),128))])])):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn btn-red",onClick:n[4]||(n[4]=(...t)=>b.leaveRoom&&b.leaveRoom(...t))},"üö™ –í—ã–π—Ç–∏ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã")])):((0,o.uX)(),(0,o.CE)("div",r,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>I.name=t),placeholder:"–í–∞—à–µ –∏–º—è",class:"form-control"},null,512),[[l.Jo,I.name]]),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":n[1]||(n[1]=t=>I.role=t),class:"form-control"},n[5]||(n[5]=[(0,o.Lk)("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å",-1),(0,o.Lk)("option",null,"FE",-1),(0,o.Lk)("option",null,"BE",-1),(0,o.Lk)("option",null,"FullStack",-1),(0,o.Lk)("option",null,"QA",-1),(0,o.Lk)("option",null,"Analyst",-1)]),512),[[l.u1,I.role]]),(0,o.Lk)("button",{class:"btn btn-purple",onClick:n[2]||(n[2]=(...t)=>b.joinRoom&&b.joinRoom(...t))},"üö™ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è")]))])}var I={data(){return{roomId:this.$route.params.roomId,name:"",role:"",joined:!1,participantId:null,storyPoints:[1,2,3,5,8,13,21],selectedSP:null,hints:[],participants:[],votesVisible:!1,pollingInterval:null}},mounted(){const t=localStorage.getItem("planningPokerParticipantId");t&&(this.participantId=t,this.joined=!0,this.startPolling())},methods:{async joinRoom(){if(!this.name||!this.role)return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ä–æ–ª—å");const t=await fetch(`/api/planning-room/${this.roomId}/join`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.name,role:this.role})}),n=await t.json();this.participantId=n.participant_id,localStorage.setItem("planningPokerParticipantId",this.participantId),this.joined=!0,this.startPolling()},async selectSP(t){this.selectedSP=t,await fetch(`/api/planning-room/${this.roomId}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({story:"–ò—Å—Ç–æ—Ä–∏—è –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è",points:this.selectedSP,participant_id:this.participantId})}),this.fetchParticipants(),this.fetchHints(t)},async fetchParticipants(){const t=await fetch(`/api/planning-room/${this.roomId}/participants`),n=await t.json();this.participants=n.participants},async fetchHints(t){const n=await fetch(`/api/planning-room/${this.roomId}/hints?sp=${t}&role=${this.role}`),i=await n.json();this.hints=i.hints||[]},startPolling(){this.pollingInterval=setInterval(this.fetchParticipants,3e3)},stopPolling(){clearInterval(this.pollingInterval)},leaveRoom(){localStorage.removeItem("planningPokerParticipantId"),this.stopPolling(),this.joined=!1,this.participantId=null}},beforeUnmount(){this.stopPolling()}},b=i(1241);const g=(0,b.A)(I,[["render",P]]);var y=g}}]);
//# sourceMappingURL=900.c35131f4.js.map