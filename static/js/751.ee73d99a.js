"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[751],{2751:function(t,n,o){o.r(n),o.d(n,{default:function(){return I}});var i=o(6768),s=o(4232),e=o(5130);const l={class:"poker-wrapper"},a={class:"poker-title"},r={key:0,class:"card poker-card"},c={key:1,class:"card poker-card"},p={class:"joined-info"},u={class:"story-box"},d={class:"sp-buttons"},h=["onClick"],k={key:0,class:"vote-result"},v={class:"participants-box"},m={key:0},y={key:1},b={key:1,class:"hints-box"};function f(t,n,o,f,L,P){return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("h1",a,"üÉè Planning Poker ‚Äî –ö–æ–º–Ω–∞—Ç–∞ "+(0,s.v_)(L.roomId),1),L.joined?((0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("div",p,[n[7]||(n[7]=(0,i.eW)("üë§ ")),(0,i.Lk)("strong",null,(0,s.v_)(L.name),1),(0,i.eW)(" ("+(0,s.v_)(L.role)+")",1)]),(0,i.Lk)("div",u,[n[8]||(n[8]=(0,i.Lk)("label",{for:"story"},"üìù –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"story","onUpdate:modelValue":n[3]||(n[3]=t=>L.storyDescription=t),class:"form-control",placeholder:"–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—à–∏ –∑–∞–¥–∞—á—É..."},null,512),[[e.Jo,L.storyDescription]])]),n[12]||(n[12]=(0,i.Lk)("h2",null,"üìå –í—ã–±–µ—Ä–∏—Ç–µ Story Point",-1)),(0,i.Lk)("div",d,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(L.storyPoints,(t=>((0,i.uX)(),(0,i.CE)("button",{key:t,onClick:n=>P.selectSP(t),class:(0,s.C4)(["sp-btn",{selected:L.selectedSP===t}])},(0,s.v_)(t),11,h)))),128))]),L.selectedSP?((0,i.uX)(),(0,i.CE)("div",k,[(0,i.Lk)("p",null,[n[9]||(n[9]=(0,i.eW)("‚úÖ –í—ã –≤—ã–±—Ä–∞–ª–∏: ")),(0,i.Lk)("strong",null,(0,s.v_)(L.selectedSP)+" SP",1)]),(0,i.Lk)("button",{class:"btn btn-blue",onClick:n[4]||(n[4]=(...t)=>P.submitVote&&P.submitVote(...t))},"üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å")])):(0,i.Q3)("",!0),(0,i.Lk)("div",v,[n[10]||(n[10]=(0,i.Lk)("h3",null,"üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏",-1)),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(L.participants,(t=>((0,i.uX)(),(0,i.CE)("li",{key:t.id},[(0,i.Lk)("strong",null,(0,s.v_)(t.name),1),(0,i.eW)(" ("+(0,s.v_)(t.role)+") ‚Äî ",1),L.votesVisible?((0,i.uX)(),(0,i.CE)("span",m,(0,s.v_)(t.voted?t.points+" SP":"‚Äî ‚ùå –ù–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª"),1)):((0,i.uX)(),(0,i.CE)("span",y,(0,s.v_)(t.voted?"üîí –û—Ü–µ–Ω–∫–∞ —Å–∫—Ä—ã—Ç–∞":"‚ùå –ù–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª"),1))])))),128))]),L.votesVisible?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn btn-purple",onClick:n[5]||(n[5]=t=>L.votesVisible=!0)}," üëÅ –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ü–µ–Ω–∫–∏ "))]),L.hints.length?((0,i.uX)(),(0,i.CE)("div",b,[n[11]||(n[11]=(0,i.Lk)("h3",null,"üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏:",-1)),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(L.hints,((t,n)=>((0,i.uX)(),(0,i.CE)("li",{key:n},"‚Äî "+(0,s.v_)(t.story),1)))),128))])])):(0,i.Q3)("",!0)])):((0,i.uX)(),(0,i.CE)("div",r,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>L.name=t),placeholder:"–í–∞—à–µ –∏–º—è",class:"form-control"},null,512),[[e.Jo,L.name]]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":n[1]||(n[1]=t=>L.role=t),class:"form-control"},n[6]||(n[6]=[(0,i.Lk)("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å",-1),(0,i.Lk)("option",null,"FE",-1),(0,i.Lk)("option",null,"BE",-1),(0,i.Lk)("option",null,"FullStack",-1),(0,i.Lk)("option",null,"QA",-1),(0,i.Lk)("option",null,"Analyst",-1)]),512),[[e.u1,L.role]]),(0,i.Lk)("button",{class:"btn btn-purple",onClick:n[2]||(n[2]=(...t)=>P.joinRoom&&P.joinRoom(...t))},"üö™ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è")]))])}var L={data(){return{roomId:this.$route.params.roomId,name:"",role:"",joined:!1,participantId:null,storyPoints:[1,2,3,5,8,13,21],selectedSP:null,hints:[],participants:[],votesVisible:!1,storyDescription:"",pollingInterval:null}},methods:{startPolling(){this.pollingInterval=setInterval((()=>{this.fetchParticipants()}),5e3)},stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)},async joinRoom(){if(!this.name||!this.role)return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ä–æ–ª—å");const t=await fetch(`/planning-room/${this.roomId}/join`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.name,role:this.role})}),n=await t.json();this.participantId=n.participant_id,this.joined=!0,await this.fetchParticipants(),this.startPolling()},selectSP(t){this.selectedSP=t,this.fetchHints(t)},async fetchParticipants(){const t=await fetch(`/planning-room/${this.roomId}/participants`),n=await t.json();this.participants=n.participants},async fetchHints(t){const n=await fetch(`/planning-room/${this.roomId}/hints?sp=${t}&role=${this.role}`),o=await n.json();this.hints=o.hints||[]},async submitVote(){await fetch(`/planning-room/${this.roomId}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({story:this.storyDescription||"–ò—Å—Ç–æ—Ä–∏—è –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è",points:this.selectedSP,participant_id:this.participantId})}),await this.fetchParticipants(),alert("–ì–æ–ª–æ—Å —É—á—Ç—ë–Ω!")},unmounted(){this.stopPolling()}}},P=o(1241);const C=(0,P.A)(L,[["render",f],["__scopeId","data-v-d699d8f2"]]);var I=C}}]);
//# sourceMappingURL=751.ee73d99a.js.map