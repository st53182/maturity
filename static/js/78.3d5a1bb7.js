"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[78],{2078:function(t,n,i){i.r(n),i.d(n,{default:function(){return L}});var o=i(6768),s=i(4232),e=i(5130);const l={class:"poker-wrapper"},a={class:"poker-title"},r={key:0,class:"card poker-card"},p={key:1,class:"card poker-card"},c={class:"joined-info"},u={class:"sp-buttons"},d=["onClick"],h={class:"participants-box"},k={key:0},v={key:1},m={key:0,class:"hints-box"};function y(t,n,i,y,f,b){return(0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("h1",a,"üÉè Planning Poker ‚Äî –ö–æ–º–Ω–∞—Ç–∞ "+(0,s.v_)(f.roomId),1),f.joined?((0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("div",c,[n[5]||(n[5]=(0,o.eW)("üë§ ")),(0,o.Lk)("strong",null,(0,s.v_)(f.name),1),(0,o.eW)(" ("+(0,s.v_)(f.role)+")",1)]),n[8]||(n[8]=(0,o.Lk)("h2",null,"üìå –í—ã–±–µ—Ä–∏—Ç–µ Story Point",-1)),(0,o.Lk)("div",u,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(f.storyPoints,(t=>((0,o.uX)(),(0,o.CE)("button",{key:t,onClick:n=>b.selectSP(t),class:(0,s.C4)(["sp-btn",{selected:f.selectedSP===t}])},(0,s.v_)(t),11,d)))),128))]),(0,o.Lk)("div",h,[n[6]||(n[6]=(0,o.Lk)("h3",null,"üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(f.participants,(t=>((0,o.uX)(),(0,o.CE)("li",{key:t.id},[(0,o.Lk)("strong",null,(0,s.v_)(t.name),1),(0,o.eW)(" ("+(0,s.v_)(t.role)+") ‚Äî ",1),f.votesVisible?((0,o.uX)(),(0,o.CE)("span",k,(0,s.v_)(t.voted?t.points+" SP":"‚Äî ‚ùå –ù–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª"),1)):((0,o.uX)(),(0,o.CE)("span",v,(0,s.v_)(t.voted?"üîí –û—Ü–µ–Ω–∫–∞ —Å–∫—Ä—ã—Ç–∞":"‚ùå –ù–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª"),1))])))),128))]),f.votesVisible?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-purple",onClick:n[3]||(n[3]=t=>f.votesVisible=!0)}," üëÅ –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ü–µ–Ω–∫–∏ "))]),f.hints.length?((0,o.uX)(),(0,o.CE)("div",m,[n[7]||(n[7]=(0,o.Lk)("h3",null,"üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏:",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(f.hints,((t,n)=>((0,o.uX)(),(0,o.CE)("li",{key:n},"‚Äî "+(0,s.v_)(t.story),1)))),128))])])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",r,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>f.name=t),placeholder:"–í–∞—à–µ –∏–º—è",class:"form-control"},null,512),[[e.Jo,f.name]]),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":n[1]||(n[1]=t=>f.role=t),class:"form-control"},n[4]||(n[4]=[(0,o.Lk)("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å",-1),(0,o.Lk)("option",null,"FE",-1),(0,o.Lk)("option",null,"BE",-1),(0,o.Lk)("option",null,"FullStack",-1),(0,o.Lk)("option",null,"QA",-1),(0,o.Lk)("option",null,"Analyst",-1)]),512),[[e.u1,f.role]]),(0,o.Lk)("button",{class:"btn btn-purple",onClick:n[2]||(n[2]=(...t)=>b.joinRoom&&b.joinRoom(...t))},"üö™ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è")]))])}var f={data(){return{roomId:this.$route.params.roomId,name:"",role:"",joined:!1,participantId:null,storyPoints:[1,2,3,5,8,13,21],selectedSP:null,hints:[],participants:[],votesVisible:!1,pollingInterval:null}},methods:{async joinRoom(){if(!this.name||!this.role)return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ä–æ–ª—å");const t=await fetch(`/api/planning-room/${this.roomId}/join`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.name,role:this.role})}),n=await t.json();this.participantId=n.participant_id,this.joined=!0,this.startPolling()},async selectSP(t){this.selectedSP=t,await fetch(`/api/planning-room/${this.roomId}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({story:"–ò—Å—Ç–æ—Ä–∏—è –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è",points:t,participant_id:this.participantId})}),this.fetchParticipants(),this.fetchHints(t)},async fetchParticipants(){const t=await fetch(`/api/planning-room/${this.roomId}/participants`),n=await t.json();this.participants=n.participants},async fetchHints(t){const n=await fetch(`/api/planning-room/${this.roomId}/hints?sp=${t}&role=${this.role}`),i=await n.json();this.hints=i.hints||[]},startPolling(){this.pollingInterval=setInterval(this.fetchParticipants,3e3)},stopPolling(){clearInterval(this.pollingInterval)}},beforeUnmount(){this.stopPolling()}},b=i(1241);const C=(0,b.A)(f,[["render",y]]);var L=C}}]);
//# sourceMappingURL=78.3d5a1bb7.js.map