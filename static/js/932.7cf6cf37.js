"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[932],{1932:function(e,t,s){s.r(t),s.d(t,{default:function(){return K}});var n=s(6436),r=s(7959),c=s(1469);const l={class:"iceberg-container"},i={class:"iceberg-list-section"},o={class:"filter-bar"},a={class:"iceberg-list"},u=["onClick"],g={key:0,class:"solutions-badge"},d=["onClick"],b={key:0,class:"modal-overlay"},h={class:"modal-content"},v={class:"modern-form"},k={class:"input-wrapper textarea-wrapper"},p={class:"modal-actions"},m=["disabled"],I={key:1,class:"modal-overlay"},L={class:"modal-content iceberg-modal"},w={class:"iceberg-visualization"},y={key:0,class:"level-content"},C={key:0,class:"level-content"},_={key:0,class:"level-content"},f={key:0,class:"level-content"},E={key:0,class:"level-content"},S={key:0,class:"question-block"},Q={class:"question-text"},A={key:0,class:"suggestions-block"},X={class:"suggestions-list"},x=["onClick"],$={key:1,class:"loading-suggestions"},j={class:"input-wrapper textarea-wrapper"},q={class:"modal-actions"},z=["disabled"],F={key:1,class:"solutions-block"},T={class:"solutions-header"},B={key:2,class:"generate-solutions-block"},O=["disabled"];function M(e,t,s,M,J,N){return(0,n.uX)(),(0,n.CE)("div",l,[t[24]||(t[24]=(0,n.Lk)("h1",null,"üßä –ê–π—Å–±–µ—Ä–≥ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è",-1)),(0,n.Lk)("div",i,[(0,n.Lk)("div",o,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=e=>J.showCreateForm=!0),class:"add-btn"},"‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–π—Å–±–µ—Ä–≥")]),(0,n.Lk)("div",a,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(J.icebergs,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"iceberg-card",onClick:t=>N.openIceberg(e)},[(0,n.Lk)("h3",null,"üßä –ê–π—Å–±–µ—Ä–≥ #"+(0,r.v_)(e.id),1),(0,n.Lk)("p",null,[t[9]||(t[9]=(0,n.Lk)("strong",null,"–°–æ–±—ã—Ç–∏–µ:",-1)),(0,n.eW)(" "+(0,r.v_)((e.event||"–ù–µ —É–∫–∞–∑–∞–Ω–æ").slice(0,100))+(0,r.v_)(e.event&&e.event.length>100?"...":""),1)]),(0,n.Lk)("p",null,[t[10]||(t[10]=(0,n.Lk)("strong",null,"–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å:",-1)),(0,n.eW)(" "+(0,r.v_)(N.getLevelName(e.current_level)),1)]),e.solutions?((0,n.uX)(),(0,n.CE)("div",g,"‚úÖ –†–µ—à–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã")):(0,n.Q3)("",!0),(0,n.Lk)("button",{class:"delete-btn",onClick:(0,c.D$)((t=>N.deleteIceberg(e.id)),["stop"])},"üóë",8,d)],8,u)))),128))])]),J.showCreateForm?((0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("div",h,[t[13]||(t[13]=(0,n.Lk)("h2",null,"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–π—Å–±–µ—Ä–≥",-1)),(0,n.Lk)("div",v,[(0,n.Lk)("div",k,[t[11]||(t[11]=(0,n.Lk)("span",{class:"input-icon"},"üìù",-1)),(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>J.newEvent=e),rows:"4",class:(0,r.C4)(["modern-input modern-textarea",{"has-value":J.newEvent}]),placeholder:"–û–ø–∏—à–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—É..."},null,2),[[c.Jo,J.newEvent]]),t[12]||(t[12]=(0,n.Lk)("label",{class:"floating-label"},"–°–æ–±—ã—Ç–∏–µ",-1))])]),(0,n.Lk)("div",p,[(0,n.Lk)("button",{class:"save-btn",onClick:t[2]||(t[2]=(...e)=>N.createIceberg&&N.createIceberg(...e)),disabled:!J.newEvent.trim()||J.creating},(0,r.v_)(J.creating?"–°–æ–∑–¥–∞–Ω–∏–µ...":"–°–æ–∑–¥–∞—Ç—å"),9,m),(0,n.Lk)("button",{class:"modal-close",onClick:t[3]||(t[3]=e=>J.showCreateForm=!1)},"‚úñ")])])])):(0,n.Q3)("",!0),J.showIcebergModal&&J.currentIceberg?((0,n.uX)(),(0,n.CE)("div",I,[(0,n.Lk)("div",L,[t[23]||(t[23]=(0,n.Lk)("h2",null,"üßä –ê–π—Å–±–µ—Ä–≥ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è",-1)),(0,n.Lk)("div",w,[(0,n.Lk)("div",{class:(0,r.C4)(["iceberg-level",{active:"event"===J.currentIceberg.current_level,completed:J.currentIceberg.event}])},[t[14]||(t[14]=(0,n.Lk)("div",{class:"level-header"},[(0,n.Lk)("span",{class:"level-number"},"1"),(0,n.Lk)("span",{class:"level-title"},"–°–æ–±—ã—Ç–∏–µ")],-1)),J.currentIceberg.event?((0,n.uX)(),(0,n.CE)("div",y,(0,r.v_)(J.currentIceberg.event),1)):(0,n.Q3)("",!0)],2),(0,n.Lk)("div",{class:(0,r.C4)(["iceberg-level",{active:"pattern"===J.currentIceberg.current_level,completed:J.currentIceberg.pattern}])},[t[15]||(t[15]=(0,n.Lk)("div",{class:"level-header"},[(0,n.Lk)("span",{class:"level-number"},"2"),(0,n.Lk)("span",{class:"level-title"},"–ü–∞—Ç—Ç–µ—Ä–Ω –ø–æ–≤–µ–¥–µ–Ω–∏—è")],-1)),J.currentIceberg.pattern?((0,n.uX)(),(0,n.CE)("div",C,(0,r.v_)(J.currentIceberg.pattern),1)):(0,n.Q3)("",!0)],2),(0,n.Lk)("div",{class:(0,r.C4)(["iceberg-level",{active:"system_structure"===J.currentIceberg.current_level,completed:J.currentIceberg.system_structure}])},[t[16]||(t[16]=(0,n.Lk)("div",{class:"level-header"},[(0,n.Lk)("span",{class:"level-number"},"3"),(0,n.Lk)("span",{class:"level-title"},"–°–∏—Å—Ç–µ–º–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞")],-1)),J.currentIceberg.system_structure?((0,n.uX)(),(0,n.CE)("div",_,(0,r.v_)(J.currentIceberg.system_structure),1)):(0,n.Q3)("",!0)],2),(0,n.Lk)("div",{class:(0,r.C4)(["iceberg-level",{active:"mental_model"===J.currentIceberg.current_level,completed:J.currentIceberg.mental_model}])},[t[17]||(t[17]=(0,n.Lk)("div",{class:"level-header"},[(0,n.Lk)("span",{class:"level-number"},"4"),(0,n.Lk)("span",{class:"level-title"},"–ú–µ–Ω—Ç–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å")],-1)),J.currentIceberg.mental_model?((0,n.uX)(),(0,n.CE)("div",f,(0,r.v_)(J.currentIceberg.mental_model),1)):(0,n.Q3)("",!0)],2),(0,n.Lk)("div",{class:(0,r.C4)(["iceberg-level",{active:"experience"===J.currentIceberg.current_level,completed:J.currentIceberg.experience}])},[t[18]||(t[18]=(0,n.Lk)("div",{class:"level-header"},[(0,n.Lk)("span",{class:"level-number"},"5"),(0,n.Lk)("span",{class:"level-title"},"–û–ø—ã—Ç")],-1)),J.currentIceberg.experience?((0,n.uX)(),(0,n.CE)("div",E,(0,r.v_)(J.currentIceberg.experience),1)):(0,n.Q3)("",!0)],2)]),J.currentQuestion&&"completed"!==J.currentIceberg.current_level?((0,n.uX)(),(0,n.CE)("div",S,[(0,n.Lk)("div",Q,(0,r.v_)(J.currentQuestion),1),J.suggestions&&J.suggestions.length>0?((0,n.uX)(),(0,n.CE)("div",A,[t[19]||(t[19]=(0,n.Lk)("p",{class:"suggestions-title"},"üí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:",-1)),(0,n.Lk)("div",X,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(J.suggestions,((e,t)=>((0,n.uX)(),(0,n.CE)("button",{key:t,class:"suggestion-btn",onClick:t=>N.selectSuggestion(e)},(0,r.v_)(e),9,x)))),128))])])):(0,n.Q3)("",!0),J.loading&&!J.suggestions.length?((0,n.uX)(),(0,n.CE)("div",$," ‚è≥ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è... ")):(0,n.Q3)("",!0),(0,n.Lk)("div",j,[t[20]||(t[20]=(0,n.Lk)("span",{class:"input-icon"},"‚úçÔ∏è",-1)),(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>J.currentAnswer=e),rows:"3",class:(0,r.C4)(["modern-input modern-textarea",{"has-value":J.currentAnswer}]),placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ '–Ω–µ –∑–Ω–∞—é' –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π..."},null,2),[[c.Jo,J.currentAnswer]]),t[21]||(t[21]=(0,n.Lk)("label",{class:"floating-label"},"–í–∞—à –æ—Ç–≤–µ—Ç",-1))]),(0,n.Lk)("div",q,[(0,n.Lk)("button",{class:"generate-btn",onClick:t[5]||(t[5]=(...e)=>N.submitAnswer&&N.submitAnswer(...e)),disabled:!J.currentAnswer.trim()||J.loading},(0,r.v_)(J.loading?"–û–±—Ä–∞–±–æ—Ç–∫–∞...":"–û—Ç–≤–µ—Ç–∏—Ç—å"),9,z),(0,n.Lk)("button",{class:"modal-close",onClick:t[6]||(t[6]=e=>J.showIcebergModal=!1)},"‚úñ")])])):(0,n.Q3)("",!0),J.currentIceberg.solutions&&J.currentIceberg.solutions.length>0?((0,n.uX)(),(0,n.CE)("div",F,[(0,n.Lk)("div",T,[t[22]||(t[22]=(0,n.Lk)("h3",null,"üí° –†–µ—à–µ–Ω–∏—è",-1)),(0,n.Lk)("button",{class:"modal-close",onClick:t[7]||(t[7]=e=>J.showIcebergModal=!1)},"‚úñ")]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(J.currentIceberg.solutions,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"solution-card"},[(0,n.Lk)("h4",null,(0,r.v_)(e.title),1),(0,n.Lk)("p",null,(0,r.v_)(e.text),1)])))),128))])):(0,n.Q3)("",!0),"experience"!==J.currentIceberg.current_level||J.currentIceberg.solutions?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",B,[(0,n.Lk)("button",{class:"generate-btn",onClick:t[8]||(t[8]=(...e)=>N.generateSolutions&&N.generateSolutions(...e)),disabled:J.generatingSolutions},(0,r.v_)(J.generatingSolutions?"–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏–π...":"–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è"),9,O)]))])])):(0,n.Q3)("",!0)])}var J={data(){return{icebergs:[],showCreateForm:!1,showIcebergModal:!1,currentIceberg:null,newEvent:"",creating:!1,currentQuestion:"",currentAnswer:"",suggestions:[],loading:!1,generatingSolutions:!1}},methods:{async fetchIcebergs(){const e=localStorage.getItem("token");try{const t=await fetch("/api/system-thinking",{headers:{Authorization:`Bearer ${e}`}});t.ok&&(this.icebergs=await t.json())}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–π—Å–±–µ—Ä–≥–æ–≤:",t)}},async createIceberg(){if(!this.newEvent.trim())return;this.creating=!0;const e=localStorage.getItem("token");try{const t=await fetch("/api/system-thinking",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({event:this.newEvent})});if(t.ok){const e=await t.json();this.showCreateForm=!1,this.newEvent="",await this.fetchIcebergs(),this.openIceberg(e)}else alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–π—Å–±–µ—Ä–≥–∞")}catch(t){console.error(t),alert("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è")}finally{this.creating=!1}},async openIceberg(e){const t=localStorage.getItem("token");try{const s=await fetch(`/api/system-thinking/${e.id}`,{headers:{Authorization:`Bearer ${t}`}});s.ok&&(this.currentIceberg=await s.json(),this.showIcebergModal=!0,"completed"!==this.currentIceberg.current_level&&await this.getCurrentQuestion())}catch(s){console.error(s),alert("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–π—Å–±–µ—Ä–≥–∞")}},async getCurrentQuestion(){const e=localStorage.getItem("token");try{const t=await fetch(`/api/system-thinking/${this.currentIceberg.id}/ask-question`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({response:""})});if(t.ok){const e=await t.json();this.currentQuestion=e.question||e.next_question,this.suggestions=e.suggestions&&Array.isArray(e.suggestions)?e.suggestions:[],e.iceberg&&(this.currentIceberg=e.iceberg)}else{const e=await t.json();console.error("–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞:",e)}}catch(t){console.error(t)}},async submitAnswer(){if(!this.currentAnswer.trim())return;this.loading=!0;const e=localStorage.getItem("token");try{const t=await fetch(`/api/system-thinking/${this.currentIceberg.id}/ask-question`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({response:this.currentAnswer})});if(t.ok){const e=await t.json();e.solutions?(this.currentIceberg.solutions=e.solutions,this.currentIceberg.current_level="completed",this.currentQuestion="",this.suggestions=[]):e.suggestions&&e.suggestions.length>0?(this.suggestions=e.suggestions,this.currentQuestion=e.question||this.currentQuestion):(this.currentQuestion=e.next_question||e.question,this.suggestions=[],this.currentAnswer="",e.iceberg?this.currentIceberg=e.iceberg:await this.openIceberg({id:this.currentIceberg.id}))}else{const e=await t.json();alert(e.error||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞")}}catch(t){console.error(t),alert("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è")}finally{this.loading=!1}},selectSuggestion(e){this.currentAnswer=e},async generateSolutions(){this.generatingSolutions=!0;const e=localStorage.getItem("token");try{const t=await fetch(`/api/system-thinking/${this.currentIceberg.id}/generate-solutions`,{method:"POST",headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();this.currentIceberg.solutions=e.solutions,this.currentIceberg.current_level="completed"}else{const e=await t.json();alert(e.error||"–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ—à–µ–Ω–∏–π")}}catch(t){console.error(t),alert("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è")}finally{this.generatingSolutions=!1}},async deleteIceberg(e){if(!confirm("–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∞–π—Å–±–µ—Ä–≥?"))return;const t=localStorage.getItem("token");try{const s=await fetch(`/api/system-thinking/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});s.ok&&(await this.fetchIcebergs(),this.currentIceberg&&this.currentIceberg.id===e&&(this.showIcebergModal=!1,this.currentIceberg=null))}catch(s){console.error(s),alert("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è")}},getLevelName(e){const t={event:"–°–æ–±—ã—Ç–∏–µ",pattern:"–ü–∞—Ç—Ç–µ—Ä–Ω –ø–æ–≤–µ–¥–µ–Ω–∏—è",system_structure:"–°–∏—Å—Ç–µ–º–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞",mental_model:"–ú–µ–Ω—Ç–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å",experience:"–û–ø—ã—Ç",completed:"–ó–∞–≤–µ—Ä—à–µ–Ω"};return t[e]||e}},async mounted(){await this.fetchIcebergs()}},N=s(5932);const P=(0,N.A)(J,[["render",M],["__scopeId","data-v-8e1b16ea"]]);var K=P}}]);
//# sourceMappingURL=932.7cf6cf37.js.map