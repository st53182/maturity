"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[733],{5733:function(e,s,t){t.r(s),t.d(s,{default:function(){return z}});var a=t(6768),l=t(4232),r=t(5130);const i={class:"surveys-container"},u={class:"create-survey-section"},c={class:"survey-type-selection"},o={key:0,class:"survey-form"},n=["placeholder"],d={value:""},y=["value"],v={value:""},p=["value"],h=["placeholder"],k=["placeholder"],m=["disabled"],L={class:"existing-surveys"},T={key:0,class:"loading"},C={key:1,class:"no-surveys"},g={key:2,class:"surveys-grid"},E={class:"survey-header"},$={class:"survey-type"},_={class:"survey-stats"},f={class:"survey-actions"},I=["onClick"],w=["onClick"];function S(e,s,t,S,b,X){return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("h1",null,"üìã "+(0,l.v_)(e.$t("surveys.title")),1),(0,a.Lk)("div",u,[(0,a.Lk)("h2",null,(0,l.v_)(e.$t("surveys.createSurvey")),1),(0,a.Lk)("div",c,[(0,a.Lk)("div",{class:(0,l.C4)(["survey-type-card",{active:"enps"===b.selectedType}]),onClick:s[0]||(s[0]=e=>b.selectedType="enps")},[(0,a.Lk)("h3",null,"üìä "+(0,l.v_)(e.$t("surveys.enpsTitle")),1),s[8]||(s[8]=(0,a.Lk)("p",null,"–°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≤ –∫–æ–º–∞–Ω–¥–µ",-1))],2),(0,a.Lk)("div",{class:(0,l.C4)(["survey-type-card",{active:"360"===b.selectedType}]),onClick:s[1]||(s[1]=e=>b.selectedType="360")},[(0,a.Lk)("h3",null,"üîÑ "+(0,l.v_)(e.$t("surveys.feedback360Title")),1),s[9]||(s[9]=(0,a.Lk)("p",null,"–°–æ–±—Ä–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ –æ—Ç –∫–æ–ª–ª–µ–≥",-1))],2)]),b.selectedType?((0,a.uX)(),(0,a.CE)("div",o,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>b.surveyTitle=e),placeholder:e.$t("surveys.surveyTitle"),class:"survey-input"},null,8,n),[[r.Jo,b.surveyTitle]]),"enps"===b.selectedType?(0,a.bo)(((0,a.uX)(),(0,a.CE)("select",{key:0,"onUpdate:modelValue":s[3]||(s[3]=e=>b.selectedTeamId=e),class:"survey-select"},[(0,a.Lk)("option",d,(0,l.v_)(e.$t("surveys.selectTeam")),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(b.teams,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.name),9,y)))),128))],512)),[[r.u1,b.selectedTeamId]]):(0,a.Q3)("",!0),"360"===b.selectedType?(0,a.bo)(((0,a.uX)(),(0,a.CE)("select",{key:1,"onUpdate:modelValue":s[4]||(s[4]=e=>b.selectedEmployeeId=e),class:"survey-select"},[(0,a.Lk)("option",v,(0,l.v_)(e.$t("surveys.selectEmployee")),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(b.employees,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.name),9,p)))),128))],512)),[[r.u1,b.selectedEmployeeId]]):(0,a.Q3)("",!0),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>b.deadline=e),type:"datetime-local",placeholder:e.$t("surveys.deadline"),class:"survey-input"},null,8,h),[[r.Jo,b.deadline]]),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":s[6]||(s[6]=e=>b.emailList=e),placeholder:e.$t("surveys.emailPlaceholder"),class:"survey-textarea",rows:"3"},null,8,k),[[r.Jo,b.emailList]]),(0,a.Lk)("button",{onClick:s[7]||(s[7]=(...e)=>X.createSurvey&&X.createSurvey(...e)),disabled:!X.canCreateSurvey,class:"create-survey-btn"},(0,l.v_)(e.$t("surveys.createAndSend")),9,m)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",L,[s[10]||(s[10]=(0,a.Lk)("h2",null,"–ú–æ–∏ –æ–ø—Ä–æ—Å–Ω–∏–∫–∏",-1)),b.loading?((0,a.uX)(),(0,a.CE)("div",T,"‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...")):0===b.surveys.length?((0,a.uX)(),(0,a.CE)("div",C," –ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ–ø—Ä–æ—Å–Ω–∏–∫–æ–≤ ")):((0,a.uX)(),(0,a.CE)("div",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(b.surveys,(s=>((0,a.uX)(),(0,a.CE)("div",{key:s.id,class:"survey-card"},[(0,a.Lk)("div",E,[(0,a.Lk)("h3",null,(0,l.v_)(s.title),1),(0,a.Lk)("span",$,(0,l.v_)(s.survey_type.toUpperCase()),1)]),(0,a.Lk)("div",_,[(0,a.Lk)("span",null,(0,l.v_)(e.$t("surveys.responses"))+": "+(0,l.v_)(s.response_count),1),(0,a.Lk)("span",{class:(0,l.C4)(["survey-status",s.status])},(0,l.v_)(e.$t(`surveys.surveyStatus.${s.status}`)),3)]),(0,a.Lk)("div",f,[(0,a.Lk)("button",{onClick:e=>X.viewResults(s.id),class:"view-results-btn"}," üìä "+(0,l.v_)(e.$t("surveys.analytics")),9,I),(0,a.Lk)("button",{onClick:e=>X.copySurveyLink(s),class:"copy-link-btn"}," üîó "+(0,l.v_)(e.$t("surveys.copyLink")),9,w)])])))),128))]))])])}t(4114),t(8111),t(2489),t(1701);var b=t(4373),X={name:"SurveyList",data(){return{selectedType:"",surveyTitle:"",selectedTeamId:"",selectedEmployeeId:"",deadline:"",emailList:"",teams:[],employees:[],surveys:[],loading:!1}},computed:{canCreateSurvey(){return this.surveyTitle&&("enps"===this.selectedType&&this.selectedTeamId||"360"===this.selectedType&&this.selectedEmployeeId)&&this.emailList}},async mounted(){await this.fetchTeams(),await this.fetchEmployees(),await this.fetchSurveys()},methods:{async fetchTeams(){try{const e=localStorage.getItem("token"),s=await b.A.get("/user_teams",{headers:{Authorization:`Bearer ${e}`}});this.teams=s.data}catch(e){console.error("Error fetching teams:",e)}},async fetchEmployees(){try{const e=localStorage.getItem("token"),s=await b.A.get("/api/employees",{headers:{Authorization:`Bearer ${e}`}});this.employees=s.data}catch(e){console.error("Error fetching employees:",e)}},async fetchSurveys(){try{this.loading=!0;const e=localStorage.getItem("token"),s=await b.A.get("/api/surveys",{headers:{Authorization:`Bearer ${e}`}});this.surveys=s.data}catch(e){console.error("Error fetching surveys:",e)}finally{this.loading=!1}},async createSurvey(){try{const e=localStorage.getItem("token"),s=this.emailList.split(",").map((e=>e.trim())).filter((e=>e)),t={survey_type:this.selectedType,title:this.surveyTitle,team_id:this.selectedTeamId||null,target_employee_id:this.selectedEmployeeId||null,deadline:this.deadline||null},a=await b.A.post("/api/surveys",t,{headers:{Authorization:`Bearer ${e}`}}),l=a.data.id;await b.A.post(`/api/surveys/${l}/send`,{emails:s},{headers:{Authorization:`Bearer ${e}`}}),alert(this.$t("surveys.surveyCreated")),this.selectedType="",this.surveyTitle="",this.selectedTeamId="",this.selectedEmployeeId="",this.deadline="",this.emailList="",await this.fetchSurveys()}catch(e){console.error("Error creating survey:",e),alert("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø—Ä–æ—Å–Ω–∏–∫–∞")}},viewResults(e){this.$router.push(`/survey/${e}/results`)},async copySurveyLink(e){try{const s=`${window.location.origin}/survey/${e.access_token}`;await navigator.clipboard.writeText(s),alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!")}catch(s){console.error("Error copying link:",s)}}}},A=t(1241);const U=(0,A.A)(X,[["render",S],["__scopeId","data-v-1ef57134"]]);var z=U}}]);
//# sourceMappingURL=733.b6f32e30.js.map