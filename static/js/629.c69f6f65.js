"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[629],{3629:function(e,t,r){r.r(t),r.d(t,{default:function(){return N}});var s=r(6436),n=r(7959),c=r(1469);const l={class:"iceberg-container"},i={class:"iceberg-list-section"},a={class:"filter-bar"},o={class:"iceberg-list"},u=["onClick"],g={key:0,class:"solutions-badge"},d=["onClick"],b={key:0,class:"modal-overlay"},v={class:"modal-content"},h={class:"modern-form"},k={class:"input-wrapper textarea-wrapper"},p={class:"modal-actions"},m=["disabled"],I={key:1,class:"modal-overlay"},L={class:"modal-content iceberg-modal"},w={class:"iceberg-visualization"},y={key:0,class:"level-content"},C={key:0,class:"level-content"},_={key:0,class:"level-content"},f={key:0,class:"level-content"},E={key:0,class:"level-content"},S={key:0,class:"question-block"},A={class:"question-text"},Q={key:0,class:"suggestions-block"},X={class:"suggestions-list"},x=["onClick"],$={class:"input-wrapper textarea-wrapper"},j={class:"modal-actions"},q=["disabled"],z={key:1,class:"solutions-block"},F={key:2,class:"generate-solutions-block"},T=["disabled"];function B(e,t,r,B,O,J){return(0,s.uX)(),(0,s.CE)("div",l,[t[23]||(t[23]=(0,s.Lk)("h1",null,"üßä –ê–π—Å–±–µ—Ä–≥ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è",-1)),(0,s.Lk)("div",i,[(0,s.Lk)("div",a,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>O.showCreateForm=!0),class:"add-btn"},"‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–π—Å–±–µ—Ä–≥")]),(0,s.Lk)("div",o,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(O.icebergs,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"iceberg-card",onClick:t=>J.openIceberg(e)},[(0,s.Lk)("h3",null,"üßä –ê–π—Å–±–µ—Ä–≥ #"+(0,n.v_)(e.id),1),(0,s.Lk)("p",null,[t[8]||(t[8]=(0,s.Lk)("strong",null,"–°–æ–±—ã—Ç–∏–µ:",-1)),(0,s.eW)(" "+(0,n.v_)((e.event||"–ù–µ —É–∫–∞–∑–∞–Ω–æ").slice(0,100))+(0,n.v_)(e.event&&e.event.length>100?"...":""),1)]),(0,s.Lk)("p",null,[t[9]||(t[9]=(0,s.Lk)("strong",null,"–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å:",-1)),(0,s.eW)(" "+(0,n.v_)(J.getLevelName(e.current_level)),1)]),e.solutions?((0,s.uX)(),(0,s.CE)("div",g,"‚úÖ –†–µ—à–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã")):(0,s.Q3)("",!0),(0,s.Lk)("button",{class:"delete-btn",onClick:(0,c.D$)((t=>J.deleteIceberg(e.id)),["stop"])},"üóë",8,d)],8,u)))),128))])]),O.showCreateForm?((0,s.uX)(),(0,s.CE)("div",b,[(0,s.Lk)("div",v,[t[12]||(t[12]=(0,s.Lk)("h2",null,"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–π—Å–±–µ—Ä–≥",-1)),(0,s.Lk)("div",h,[(0,s.Lk)("div",k,[t[10]||(t[10]=(0,s.Lk)("span",{class:"input-icon"},"üìù",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>O.newEvent=e),rows:"4",class:(0,n.C4)(["modern-input modern-textarea",{"has-value":O.newEvent}]),placeholder:"–û–ø–∏—à–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—É..."},null,2),[[c.Jo,O.newEvent]]),t[11]||(t[11]=(0,s.Lk)("label",{class:"floating-label"},"–°–æ–±—ã—Ç–∏–µ",-1))])]),(0,s.Lk)("div",p,[(0,s.Lk)("button",{class:"save-btn",onClick:t[2]||(t[2]=(...e)=>J.createIceberg&&J.createIceberg(...e)),disabled:!O.newEvent.trim()||O.creating},(0,n.v_)(O.creating?"–°–æ–∑–¥–∞–Ω–∏–µ...":"–°–æ–∑–¥–∞—Ç—å"),9,m),(0,s.Lk)("button",{class:"modal-close",onClick:t[3]||(t[3]=e=>O.showCreateForm=!1)},"‚úñ")])])])):(0,s.Q3)("",!0),O.showIcebergModal&&O.currentIceberg?((0,s.uX)(),(0,s.CE)("div",I,[(0,s.Lk)("div",L,[t[22]||(t[22]=(0,s.Lk)("h2",null,"üßä –ê–π—Å–±–µ—Ä–≥ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è",-1)),(0,s.Lk)("div",w,[(0,s.Lk)("div",{class:(0,n.C4)(["iceberg-level",{active:"event"===O.currentIceberg.current_level,completed:O.currentIceberg.event}])},[t[13]||(t[13]=(0,s.Lk)("div",{class:"level-header"},[(0,s.Lk)("span",{class:"level-number"},"1"),(0,s.Lk)("span",{class:"level-title"},"–°–æ–±—ã—Ç–∏–µ")],-1)),O.currentIceberg.event?((0,s.uX)(),(0,s.CE)("div",y,(0,n.v_)(O.currentIceberg.event),1)):(0,s.Q3)("",!0)],2),(0,s.Lk)("div",{class:(0,n.C4)(["iceberg-level",{active:"pattern"===O.currentIceberg.current_level,completed:O.currentIceberg.pattern}])},[t[14]||(t[14]=(0,s.Lk)("div",{class:"level-header"},[(0,s.Lk)("span",{class:"level-number"},"2"),(0,s.Lk)("span",{class:"level-title"},"–ü–∞—Ç—Ç–µ—Ä–Ω –ø–æ–≤–µ–¥–µ–Ω–∏—è")],-1)),O.currentIceberg.pattern?((0,s.uX)(),(0,s.CE)("div",C,(0,n.v_)(O.currentIceberg.pattern),1)):(0,s.Q3)("",!0)],2),(0,s.Lk)("div",{class:(0,n.C4)(["iceberg-level",{active:"system_structure"===O.currentIceberg.current_level,completed:O.currentIceberg.system_structure}])},[t[15]||(t[15]=(0,s.Lk)("div",{class:"level-header"},[(0,s.Lk)("span",{class:"level-number"},"3"),(0,s.Lk)("span",{class:"level-title"},"–°–∏—Å—Ç–µ–º–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞")],-1)),O.currentIceberg.system_structure?((0,s.uX)(),(0,s.CE)("div",_,(0,n.v_)(O.currentIceberg.system_structure),1)):(0,s.Q3)("",!0)],2),(0,s.Lk)("div",{class:(0,n.C4)(["iceberg-level",{active:"mental_model"===O.currentIceberg.current_level,completed:O.currentIceberg.mental_model}])},[t[16]||(t[16]=(0,s.Lk)("div",{class:"level-header"},[(0,s.Lk)("span",{class:"level-number"},"4"),(0,s.Lk)("span",{class:"level-title"},"–ú–µ–Ω—Ç–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å")],-1)),O.currentIceberg.mental_model?((0,s.uX)(),(0,s.CE)("div",f,(0,n.v_)(O.currentIceberg.mental_model),1)):(0,s.Q3)("",!0)],2),(0,s.Lk)("div",{class:(0,n.C4)(["iceberg-level",{active:"experience"===O.currentIceberg.current_level,completed:O.currentIceberg.experience}])},[t[17]||(t[17]=(0,s.Lk)("div",{class:"level-header"},[(0,s.Lk)("span",{class:"level-number"},"5"),(0,s.Lk)("span",{class:"level-title"},"–û–ø—ã—Ç")],-1)),O.currentIceberg.experience?((0,s.uX)(),(0,s.CE)("div",E,(0,n.v_)(O.currentIceberg.experience),1)):(0,s.Q3)("",!0)],2)]),O.currentQuestion&&"completed"!==O.currentIceberg.current_level?((0,s.uX)(),(0,s.CE)("div",S,[(0,s.Lk)("div",A,(0,n.v_)(O.currentQuestion),1),O.suggestions.length>0?((0,s.uX)(),(0,s.CE)("div",Q,[t[18]||(t[18]=(0,s.Lk)("p",{class:"suggestions-title"},"üí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:",-1)),(0,s.Lk)("div",X,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(O.suggestions,((e,t)=>((0,s.uX)(),(0,s.CE)("button",{key:t,class:"suggestion-btn",onClick:t=>J.selectSuggestion(e)},(0,n.v_)(e),9,x)))),128))])])):(0,s.Q3)("",!0),(0,s.Lk)("div",$,[t[19]||(t[19]=(0,s.Lk)("span",{class:"input-icon"},"‚úçÔ∏è",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>O.currentAnswer=e),rows:"3",class:(0,n.C4)(["modern-input modern-textarea",{"has-value":O.currentAnswer}]),placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ '–Ω–µ –∑–Ω–∞—é' –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π..."},null,2),[[c.Jo,O.currentAnswer]]),t[20]||(t[20]=(0,s.Lk)("label",{class:"floating-label"},"–í–∞—à –æ—Ç–≤–µ—Ç",-1))]),(0,s.Lk)("div",j,[(0,s.Lk)("button",{class:"generate-btn",onClick:t[5]||(t[5]=(...e)=>J.submitAnswer&&J.submitAnswer(...e)),disabled:!O.currentAnswer.trim()||O.loading},(0,n.v_)(O.loading?"–û–±—Ä–∞–±–æ—Ç–∫–∞...":"–û—Ç–≤–µ—Ç–∏—Ç—å"),9,q),(0,s.Lk)("button",{class:"modal-close",onClick:t[6]||(t[6]=e=>O.showIcebergModal=!1)},"‚úñ")])])):(0,s.Q3)("",!0),O.currentIceberg.solutions&&O.currentIceberg.solutions.length>0?((0,s.uX)(),(0,s.CE)("div",z,[t[21]||(t[21]=(0,s.Lk)("h3",null,"üí° –†–µ—à–µ–Ω–∏—è",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(O.currentIceberg.solutions,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"solution-card"},[(0,s.Lk)("h4",null,(0,n.v_)(e.title),1),(0,s.Lk)("p",null,(0,n.v_)(e.text),1)])))),128))])):(0,s.Q3)("",!0),"experience"!==O.currentIceberg.current_level||O.currentIceberg.solutions?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",F,[(0,s.Lk)("button",{class:"generate-btn",onClick:t[7]||(t[7]=(...e)=>J.generateSolutions&&J.generateSolutions(...e)),disabled:O.generatingSolutions},(0,n.v_)(O.generatingSolutions?"–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏–π...":"–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è"),9,T)]))])])):(0,s.Q3)("",!0)])}var O={data(){return{icebergs:[],showCreateForm:!1,showIcebergModal:!1,currentIceberg:null,newEvent:"",creating:!1,currentQuestion:"",currentAnswer:"",suggestions:[],loading:!1,generatingSolutions:!1}},methods:{async fetchIcebergs(){const e=localStorage.getItem("token");try{const t=await fetch("/api/system-thinking",{headers:{Authorization:`Bearer ${e}`}});t.ok&&(this.icebergs=await t.json())}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–π—Å–±–µ—Ä–≥–æ–≤:",t)}},async createIceberg(){if(!this.newEvent.trim())return;this.creating=!0;const e=localStorage.getItem("token");try{const t=await fetch("/api/system-thinking",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({event:this.newEvent})});if(t.ok){const e=await t.json();this.showCreateForm=!1,this.newEvent="",await this.fetchIcebergs(),this.openIceberg(e)}else alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–π—Å–±–µ—Ä–≥–∞")}catch(t){console.error(t),alert("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è")}finally{this.creating=!1}},async openIceberg(e){const t=localStorage.getItem("token");try{const r=await fetch(`/api/system-thinking/${e.id}`,{headers:{Authorization:`Bearer ${t}`}});r.ok&&(this.currentIceberg=await r.json(),this.showIcebergModal=!0,"completed"!==this.currentIceberg.current_level&&await this.getCurrentQuestion())}catch(r){console.error(r),alert("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–π—Å–±–µ—Ä–≥–∞")}},async getCurrentQuestion(){const e=localStorage.getItem("token");try{const t=await fetch(`/api/system-thinking/${this.currentIceberg.id}/ask-question`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({response:""})});if(t.ok){const e=await t.json();this.currentQuestion=e.question||e.next_question,this.suggestions=e.suggestions||[],e.iceberg&&(this.currentIceberg=e.iceberg)}}catch(t){console.error(t)}},async submitAnswer(){if(!this.currentAnswer.trim())return;this.loading=!0;const e=localStorage.getItem("token");try{const t=await fetch(`/api/system-thinking/${this.currentIceberg.id}/ask-question`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({response:this.currentAnswer})});if(t.ok){const e=await t.json();e.solutions?(this.currentIceberg.solutions=e.solutions,this.currentIceberg.current_level="completed",this.currentQuestion=""):(this.currentQuestion=e.next_question||e.question,this.suggestions=e.suggestions||[],this.currentAnswer="",e.iceberg?this.currentIceberg=e.iceberg:await this.openIceberg({id:this.currentIceberg.id}))}else{const e=await t.json();alert(e.error||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞")}}catch(t){console.error(t),alert("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è")}finally{this.loading=!1}},selectSuggestion(e){this.currentAnswer=e},async generateSolutions(){this.generatingSolutions=!0;const e=localStorage.getItem("token");try{const t=await fetch(`/api/system-thinking/${this.currentIceberg.id}/generate-solutions`,{method:"POST",headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();this.currentIceberg.solutions=e.solutions,this.currentIceberg.current_level="completed"}else{const e=await t.json();alert(e.error||"–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ—à–µ–Ω–∏–π")}}catch(t){console.error(t),alert("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è")}finally{this.generatingSolutions=!1}},async deleteIceberg(e){if(!confirm("–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∞–π—Å–±–µ—Ä–≥?"))return;const t=localStorage.getItem("token");try{const r=await fetch(`/api/system-thinking/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});r.ok&&(await this.fetchIcebergs(),this.currentIceberg&&this.currentIceberg.id===e&&(this.showIcebergModal=!1,this.currentIceberg=null))}catch(r){console.error(r),alert("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è")}},getLevelName(e){const t={event:"–°–æ–±—ã—Ç–∏–µ",pattern:"–ü–∞—Ç—Ç–µ—Ä–Ω –ø–æ–≤–µ–¥–µ–Ω–∏—è",system_structure:"–°–∏—Å—Ç–µ–º–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞",mental_model:"–ú–µ–Ω—Ç–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å",experience:"–û–ø—ã—Ç",completed:"–ó–∞–≤–µ—Ä—à–µ–Ω"};return t[e]||e}},async mounted(){await this.fetchIcebergs()}},J=r(5932);const M=(0,J.A)(O,[["render",B],["__scopeId","data-v-73b0d0e2"]]);var N=M}}]);
//# sourceMappingURL=629.c69f6f65.js.map