"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[881],{881:function(e,l,t){t.r(l),t.d(l,{default:function(){return w}});var o=t(6768),r=t(4232),a=t(5130);const s={class:"prep-container"},n={class:"subtitle"},u={class:"form-grid"},i={value:"story"},c={value:"epic"},k={class:"block"},p=["placeholder"],g={class:"block"},d=["placeholder"],m={class:"actions"},h=["disabled"],v={key:0,class:"error"},b={key:0,class:"results"},f={key:0},y={key:1},L={key:2},_={key:3},x={class:"example"};function P(e,l,t,P,$,C){return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("h1",null,(0,r.v_)(e.$t("backlogPrep.title")),1),(0,o.Lk)("p",n,(0,r.v_)(e.$t("backlogPrep.subtitle")),1),(0,o.Lk)("div",u,[(0,o.Lk)("label",null,[(0,o.eW)((0,r.v_)(e.$t("backlogPrep.workType"))+" ",1),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>$.form.workType=e)},[(0,o.Lk)("option",i,(0,r.v_)(e.$t("backlogPrep.story")),1),(0,o.Lk)("option",c,(0,r.v_)(e.$t("backlogPrep.epic")),1)],512),[[a.u1,$.form.workType]])]),(0,o.Lk)("label",null,[(0,o.eW)((0,r.v_)(e.$t("backlogPrep.language"))+" ",1),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>$.form.language=e)},l[5]||(l[5]=[(0,o.Lk)("option",{value:"ru"},"–†—É—Å—Å–∫–∏–π",-1),(0,o.Lk)("option",{value:"en"},"English",-1)]),512),[[a.u1,$.form.language]])])]),(0,o.Lk)("label",k,[(0,o.eW)((0,r.v_)(e.$t("backlogPrep.description"))+" ",1),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":l[2]||(l[2]=e=>$.form.text=e),rows:"7",placeholder:e.$t("backlogPrep.descriptionPlaceholder")},null,8,p),[[a.Jo,$.form.text]])]),(0,o.Lk)("label",g,[(0,o.eW)((0,r.v_)(e.$t("backlogPrep.context"))+" ",1),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":l[3]||(l[3]=e=>$.form.context=e),rows:"4",placeholder:e.$t("backlogPrep.contextPlaceholder")},null,8,d),[[a.Jo,$.form.context]])]),(0,o.Lk)("div",m,[(0,o.Lk)("button",{class:"primary",onClick:l[4]||(l[4]=(...e)=>C.analyze&&C.analyze(...e)),disabled:$.loading},(0,r.v_)($.loading?e.$t("common.loading"):e.$t("backlogPrep.run")),9,h),$.error?((0,o.uX)(),(0,o.CE)("span",v,(0,r.v_)($.error),1)):(0,o.Q3)("",!0)]),$.result?((0,o.uX)(),(0,o.CE)("div",b,[$.result.missing_fields?.length?((0,o.uX)(),(0,o.CE)("section",f,[(0,o.Lk)("h3",null,"üß© "+(0,r.v_)(e.$t("backlogPrep.missingFields")),1),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)($.result.missing_fields,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,r.v_)(e),1)))),128))])])):(0,o.Q3)("",!0),$.result.questions?.length?((0,o.uX)(),(0,o.CE)("section",y,[(0,o.Lk)("h3",null,"‚ùì "+(0,r.v_)(e.$t("backlogPrep.questions")),1),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)($.result.questions,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,r.v_)(e),1)))),128))])])):(0,o.Q3)("",!0),$.result.suggestions?.length?((0,o.uX)(),(0,o.CE)("section",L,[(0,o.Lk)("h3",null,"üí° "+(0,r.v_)(e.$t("backlogPrep.suggestions")),1),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)($.result.suggestions,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,r.v_)(e),1)))),128))])])):(0,o.Q3)("",!0),$.result.improved_example?((0,o.uX)(),(0,o.CE)("section",_,[(0,o.Lk)("h3",null,"üìù "+(0,r.v_)(e.$t("backlogPrep.improvedExample")),1),(0,o.Lk)("div",x,(0,r.v_)($.result.improved_example),1)])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])}var $=t(4373),C={name:"BacklogPrep",data(){return{loading:!1,error:"",result:null,form:{text:"",context:"",workType:"story",language:"ru"}}},methods:{async analyze(){if(this.error="",this.result=null,this.form.text.trim()){this.loading=!0;try{const e=localStorage.getItem("token"),{data:l}=await $.A.post("/api/backlog/prep",{text:this.form.text,context:this.form.context,work_type:this.form.workType,language:this.form.language},e?{headers:{Authorization:`Bearer ${e}`}}:void 0);this.result=l}catch(e){this.error=e?.response?.data?.error||e?.message||this.$t("common.error")}finally{this.loading=!1}}else this.error=this.$t("backlogPrep.validation")}}},E=t(1241);const X=(0,E.A)(C,[["render",P],["__scopeId","data-v-57935e3f"]]);var w=X}}]);
//# sourceMappingURL=881.d8303a39.js.map