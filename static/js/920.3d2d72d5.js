"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[920],{4920:function(t,n,i){i.r(n),i.d(n,{default:function(){return P}});var o=i(6768),e=i(4232),s=i(5130);const l={class:"poker-wrapper"},a={class:"poker-title"},r={key:0,class:"card poker-card"},c={key:1,class:"card poker-card"},p={class:"joined-info"},u={class:"sp-buttons"},d=["onClick"],h={key:0,class:"vote-result"},k={class:"participants-box"},m={key:0},v={key:1},b={key:1,class:"hints-box"};function y(t,n,i,y,f,C){return(0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("h1",a,"üÉè Planning Poker ‚Äî –ö–æ–º–Ω–∞—Ç–∞ "+(0,e.v_)(f.roomId),1),f.joined?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",p,[n[6]||(n[6]=(0,o.eW)("üë§ ")),(0,o.Lk)("strong",null,(0,e.v_)(f.name),1),(0,o.eW)(" ("+(0,e.v_)(f.role)+")",1)]),n[10]||(n[10]=(0,o.Lk)("h2",null,"üìå –í—ã–±–µ—Ä–∏—Ç–µ Story Point",-1)),(0,o.Lk)("div",u,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(f.storyPoints,(t=>((0,o.uX)(),(0,o.CE)("button",{key:t,onClick:n=>C.selectSP(t),class:(0,e.C4)(["sp-btn",{selected:f.selectedSP===t}])},(0,e.v_)(t),11,d)))),128))]),f.selectedSP?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("p",null,[n[7]||(n[7]=(0,o.eW)("‚úÖ –í—ã –≤—ã–±—Ä–∞–ª–∏: ")),(0,o.Lk)("strong",null,(0,e.v_)(f.selectedSP)+" SP",1)]),(0,o.Lk)("button",{class:"btn btn-blue",onClick:n[3]||(n[3]=(...t)=>C.submitVote&&C.submitVote(...t))},"üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å")])):(0,o.Q3)("",!0),(0,o.Lk)("div",k,[n[8]||(n[8]=(0,o.Lk)("h3",null,"üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(f.participants,(t=>((0,o.uX)(),(0,o.CE)("li",{key:t.id},[(0,o.Lk)("strong",null,(0,e.v_)(t.name),1),(0,o.eW)(" ("+(0,e.v_)(t.role)+") ‚Äî ",1),f.votesVisible?((0,o.uX)(),(0,o.CE)("span",m,(0,e.v_)(t.voted?t.points+" SP":"‚Äî ‚ùå –ù–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª"),1)):((0,o.uX)(),(0,o.CE)("span",v,(0,e.v_)(t.voted?"üîí –û—Ü–µ–Ω–∫–∞ —Å–∫—Ä—ã—Ç–∞":"‚ùå –ù–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª"),1))])))),128))]),f.votesVisible?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-purple",onClick:n[4]||(n[4]=t=>f.votesVisible=!0)}," üëÅ –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ü–µ–Ω–∫–∏ "))]),f.hints.length?((0,o.uX)(),(0,o.CE)("div",b,[n[9]||(n[9]=(0,o.Lk)("h3",null,"üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏:",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(f.hints,((t,n)=>((0,o.uX)(),(0,o.CE)("li",{key:n},"‚Äî "+(0,e.v_)(t.story),1)))),128))])])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",r,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>f.name=t),placeholder:"–í–∞—à–µ –∏–º—è",class:"form-control"},null,512),[[s.Jo,f.name]]),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":n[1]||(n[1]=t=>f.role=t),class:"form-control"},n[5]||(n[5]=[(0,o.Lk)("option",{disabled:"",value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å",-1),(0,o.Lk)("option",null,"FE",-1),(0,o.Lk)("option",null,"BE",-1),(0,o.Lk)("option",null,"FullStack",-1),(0,o.Lk)("option",null,"QA",-1),(0,o.Lk)("option",null,"Analyst",-1)]),512),[[s.u1,f.role]]),(0,o.Lk)("button",{class:"btn btn-purple",onClick:n[2]||(n[2]=(...t)=>C.joinRoom&&C.joinRoom(...t))},"üö™ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è")]))])}var f={data(){return{roomId:this.$route.params.roomId,name:"",role:"",joined:!1,participantId:null,storyPoints:[1,2,3,5,8,13,21],selectedSP:null,hints:[],participants:[],votesVisible:!1}},methods:{async joinRoom(){if(!this.name||!this.role)return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ä–æ–ª—å");const t=await fetch(`/api/planning-room/${this.roomId}/join`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.name,role:this.role})}),n=await t.json();this.participantId=n.participant_id,this.joined=!0,await this.fetchParticipants()},selectSP(t){this.selectedSP=t,this.fetchHints(t)},async fetchParticipants(){const t=await fetch(`/api/planning-room/${this.roomId}/participants`),n=await t.json();this.participants=n.participants},async fetchHints(t){const n=await fetch(`/api/planning-room/${this.roomId}/hints?sp=${t}&role=${this.role}`),i=await n.json();this.hints=i.hints||[]},async submitVote(){await fetch(`/api/planning-room/${this.roomId}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({story:"–ò—Å—Ç–æ—Ä–∏—è –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è",points:this.selectedSP,participant_id:this.participantId})}),alert("–ì–æ–ª–æ—Å —É—á—Ç—ë–Ω!"),await this.fetchParticipants()}}},C=i(1241);const L=(0,C.A)(f,[["render",y],["__scopeId","data-v-57f571d0"]]);var P=L}}]);
//# sourceMappingURL=920.3d2d72d5.js.map