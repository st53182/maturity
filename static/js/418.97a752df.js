"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[418],{6418:function(e,a,t){t.r(a),t.d(a,{default:function(){return g}});var o=t(6768),l=t(4232),r=t(5130);const i={class:"motivation-container"},n={class:"employee-list"},s=["onClick"],m=["src"],d={class:"team-name"},c={class:"disc-type"},u=["onClick"],p={class:"form-group"},f=["value"],k={class:"form-group"},h=["disabled"],b={key:0,class:"result-block"},v=["innerHTML"];function y(e,a,t,y,L,_){return(0,o.uX)(),(0,o.CE)("div",i,[a[19]||(a[19]=(0,o.Lk)("h1",null,"🎯 Мотивация сотрудника",-1)),(0,o.Lk)("div",n,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(L.employees,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"employee-card",onClick:a=>_.selectEmployee(e)},[(0,o.Lk)("img",{class:"avatar",src:_.getAvatarUrl(e.ai_analysis),alt:"avatar"},null,8,m),(0,o.Lk)("h4",null,(0,l.v_)(e.name),1),(0,o.Lk)("p",d,(0,l.v_)(_.getTeamName(e.team_id)),1),(0,o.Lk)("span",c,(0,l.v_)(_.extractDISCType(e.ai_analysis)),1),(0,o.Lk)("button",{onClick:(0,r.D$)((a=>_.deleteEmployee(e.id)),["stop"])},"🗑",8,u)],8,s)))),128))]),(0,o.Lk)("div",{class:"employee-card add-card",onClick:a[0]||(a[0]=(...e)=>_.resetForm&&_.resetForm(...e))},a[9]||(a[9]=[(0,o.Lk)("span",null,"➕",-1),(0,o.Lk)("p",null,"Создать",-1)])),(0,o.Lk)("form",{onSubmit:a[8]||(a[8]=(0,r.D$)(((...e)=>_.submitMotivation&&_.submitMotivation(...e)),["prevent"]))},[(0,o.Lk)("div",p,[a[11]||(a[11]=(0,o.Lk)("label",null,"Имя сотрудника:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>L.form.name=e),placeholder:"Например: Иван Иванов",required:""},null,512),[[r.Jo,L.form.name]]),a[12]||(a[12]=(0,o.Lk)("label",null,"Должность:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>L.form.role=e),placeholder:"Например: Аналитик, Разработчик...",required:""},null,512),[[r.Jo,L.form.role]]),a[13]||(a[13]=(0,o.Lk)("label",null,"Команда:",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>L.form.team_id=e),required:""},[a[10]||(a[10]=(0,o.Lk)("option",{disabled:"",value:""},"Выберите команду",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(L.teams,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.name),9,f)))),128))],512),[[r.u1,L.form.team_id]])]),(0,o.Lk)("div",k,[a[14]||(a[14]=(0,o.Lk)("label",null,"1. Поведение в стрессовой ситуации",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":a[4]||(a[4]=e=>L.form.stress=e),placeholder:"Как он реагирует на давление, конфликты...",required:""},null,512),[[r.Jo,L.form.stress]]),a[15]||(a[15]=(0,o.Lk)("label",null,"2. Взаимодействие с другими",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":a[5]||(a[5]=e=>L.form.communication=e),placeholder:"Открытый, сдержанный, любит работать в команде или один...",required:""},null,512),[[r.Jo,L.form.communication]]),a[16]||(a[16]=(0,o.Lk)("label",null,"3. Особенности в работе",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":a[6]||(a[6]=e=>L.form.behavior=e),placeholder:"Привычки, подход, структура, планирование...",required:""},null,512),[[r.Jo,L.form.behavior]]),a[17]||(a[17]=(0,o.Lk)("label",null,"4. Реакции на критику и изменения",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":a[7]||(a[7]=e=>L.form.feedback=e),placeholder:"Как принимает фидбек, открыт к переменам...",required:""},null,512),[[r.Jo,L.form.feedback]])]),(0,o.Lk)("button",{type:"submit",disabled:L.loading},(0,l.v_)(L.loading?"Сохраняем и анализируем...":"Сохранить и получить рекомендации"),9,h)],32),L.result?((0,o.uX)(),(0,o.CE)("div",b,[a[18]||(a[18]=(0,o.Lk)("h2",null,"📋 Рекомендации",-1)),(0,o.Lk)("div",{innerHTML:L.result},null,8,v)])):(0,o.Q3)("",!0)])}t(8111),t(2489),t(116);var L={data(){return{form:{name:"",role:"",team_id:"",stress:"",communication:"",behavior:"",feedback:""},teams:[],employees:[],discProfiles:[],result:"",loading:!1}},async mounted(){const e=localStorage.getItem("token"),a=await fetch("/user_teams",{headers:{Authorization:`Bearer ${e}`}});this.teams=await a.json();const t=await fetch("/employees");this.employees=await t.json();const o=await fetch("/static/disc_profiles_for_frontend.json");this.discProfiles=await o.json()},methods:{async submitMotivation(){this.loading=!0;try{const e=await fetch("/motivation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.form)}),a=await e.json();e.ok?(this.result=a.analysis,this.form.id=a.employee_id):alert(a.error)}catch(e){alert("Ошибка подключения")}finally{this.loading=!1}},resetForm(){this.form={id:null,name:"",role:"",team_id:"",stress:"",communication:"",behavior:"",feedback:""},this.result=""},async deleteEmployee(e){confirm("Удалить сотрудника?")&&(await fetch(`/employee/${e}`,{method:"DELETE"}),this.employees=this.employees.filter((a=>a.id!==e)))},selectEmployee(e){this.form={name:e.name,role:e.role,team_id:e.team_id,stress:e.stress,communication:e.communication,behavior:e.behavior,feedback:e.feedback},this.result=e.ai_analysis},extractDISCType(e){const a=e?.match(/\*\*Тип DISC:\*\*\s*(.+)/i);return a?a[1].split("\n")[0].trim():"Неизвестно"},getTeamName(e){const a=this.teams.find((a=>a.id===e));return a?a.name:"—"},getAvatarUrl(e){const a=this.extractDISCType(e);if(!a){const e=Math.floor(5*Math.random())+1;return`/avatars/random${e}.png`}const t=a.toLowerCase().split(" ")[0].replace(/[^\w]/g,"");return`/avatars/${t||"default"}.png`}}},_=t(1241);const C=(0,_.A)(L,[["render",y],["__scopeId","data-v-639ca7b6"]]);var g=C}}]);
//# sourceMappingURL=418.97a752df.js.map