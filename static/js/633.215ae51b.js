"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[633],{633:function(e,t,s){s.r(t),s.d(t,{default:function(){return xe}});var i=s(6768),o=s(4232),l=s(5130);const a={class:"surveys-container"},n={class:"create-survey-section"},r={class:"survey-type-selection"},u={key:0,class:"survey-form"},c=["placeholder"],d={class:"template-selection"},p=["value"],v={class:"optional-selection"},m={value:""},y=["value"],h={class:"optional-selection"},k={value:""},T=["value"],b=["disabled"],C={class:"existing-surveys"},q={key:0,class:"loading"},L={key:1,class:"no-surveys"},w={key:2,class:"surveys-grid"},E={class:"survey-header"},x={class:"survey-type"},g={class:"survey-stats"},f={class:"survey-actions"},S=["onClick"],_=["onClick"],I=["onClick"];function $(e,t,s,$,Q,X){const U=(0,i.g2)("TemplateEditor"),A=(0,i.g2)("QuestionPreview");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("h1",null,"üìã "+(0,o.v_)(e.$t("surveys.title")),1),(0,i.Lk)("div",n,[(0,i.Lk)("h2",null,(0,o.v_)(e.$t("surveys.createSurvey")),1),(0,i.Lk)("div",r,[(0,i.Lk)("div",{class:(0,o.C4)(["survey-type-card",{active:"enps"===Q.selectedType}]),onClick:t[0]||(t[0]=e=>X.selectSurveyType("enps"))},[(0,i.Lk)("h3",null,"üìä "+(0,o.v_)(e.$t("surveys.enpsTitle")),1),t[11]||(t[11]=(0,i.Lk)("p",null,"–°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≤ –∫–æ–º–∞–Ω–¥–µ",-1))],2),(0,i.Lk)("div",{class:(0,o.C4)(["survey-type-card",{active:"360"===Q.selectedType}]),onClick:t[1]||(t[1]=e=>X.selectSurveyType("360"))},[(0,i.Lk)("h3",null,"üîÑ "+(0,o.v_)(e.$t("surveys.feedback360Title")),1),t[12]||(t[12]=(0,i.Lk)("p",null,"–°–æ–±—Ä–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ –æ—Ç –∫–æ–ª–ª–µ–≥",-1))],2)]),Q.selectedType?((0,i.uX)(),(0,i.CE)("div",u,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>Q.surveyTitle=e),placeholder:e.$t("surveys.surveyTitle"),class:"survey-input"},null,8,c),[[l.Jo,Q.surveyTitle]]),(0,i.Lk)("div",d,[t[14]||(t[14]=(0,i.Lk)("label",null,"–í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>Q.selectedTemplateId=e),class:"survey-select"},[t[13]||(t[13]=(0,i.Lk)("option",{value:""},"–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Q.availableTemplates,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.name),9,p)))),128))],512),[[l.u1,Q.selectedTemplateId]]),(0,i.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>X.editTemplate&&X.editTemplate(...e)),class:"edit-template-btn"},(0,o.v_)(Q.selectedTemplateId?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å":"–°–æ–∑–¥–∞—Ç—å —Å–≤–æ–π"),1)]),(0,i.Lk)("div",v,[(0,i.Lk)("label",null,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>Q.useTeamSelection=e)},null,512),[[l.lH,Q.useTeamSelection]]),t[15]||(t[15]=(0,i.eW)(" –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ –∫–æ–º–∞–Ω–¥–µ "))]),Q.useTeamSelection&&"enps"===Q.selectedType?(0,i.bo)(((0,i.uX)(),(0,i.CE)("select",{key:0,"onUpdate:modelValue":t[6]||(t[6]=e=>Q.selectedTeamId=e),class:"survey-select"},[(0,i.Lk)("option",m,(0,o.v_)(e.$t("surveys.selectTeam")),1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Q.teams,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.name),9,y)))),128))],512)),[[l.u1,Q.selectedTeamId]]):(0,i.Q3)("",!0)]),(0,i.Lk)("div",h,[(0,i.Lk)("label",null,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>Q.useEmployeeSelection=e)},null,512),[[l.lH,Q.useEmployeeSelection]]),t[16]||(t[16]=(0,i.eW)(" –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É "))]),Q.useEmployeeSelection&&"360"===Q.selectedType?(0,i.bo)(((0,i.uX)(),(0,i.CE)("select",{key:0,"onUpdate:modelValue":t[8]||(t[8]=e=>Q.selectedEmployeeId=e),class:"survey-select"},[(0,i.Lk)("option",k,(0,o.v_)(e.$t("surveys.selectEmployee")),1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Q.employees,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.name),9,T)))),128))],512)),[[l.u1,Q.selectedEmployeeId]]):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>X.createSurvey&&X.createSurvey(...e)),disabled:!X.canCreateSurvey,class:"create-survey-btn"},(0,o.v_)(e.$t("surveys.createAndSend")),9,b)])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",C,[t[17]||(t[17]=(0,i.Lk)("h2",null,"–ú–æ–∏ –æ–ø—Ä–æ—Å–Ω–∏–∫–∏",-1)),Q.loading?((0,i.uX)(),(0,i.CE)("div",q,"‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...")):0===Q.surveys.length?((0,i.uX)(),(0,i.CE)("div",L," –ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ–ø—Ä–æ—Å–Ω–∏–∫–æ–≤ ")):((0,i.uX)(),(0,i.CE)("div",w,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Q.surveys,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t.id,class:"survey-card"},[(0,i.Lk)("div",E,[(0,i.Lk)("h3",null,(0,o.v_)(t.title),1),(0,i.Lk)("span",x,(0,o.v_)(t.survey_type.toUpperCase()),1)]),(0,i.Lk)("div",g,[(0,i.Lk)("span",null,(0,o.v_)(e.$t("surveys.responses"))+": "+(0,o.v_)(t.response_count),1),(0,i.Lk)("span",{class:(0,o.C4)(["survey-status",t.status])},(0,o.v_)(e.$t(`surveys.surveyStatus.${t.status}`)),3)]),(0,i.Lk)("div",f,[(0,i.Lk)("button",{onClick:e=>X.viewResults(t.id),class:"view-results-btn"}," üìä "+(0,o.v_)(e.$t("surveys.analytics")),9,S),(0,i.Lk)("button",{onClick:e=>X.copySurveyLink(t),class:"copy-link-btn"}," üîó "+(0,o.v_)(e.$t("surveys.copyLink")),9,_),(0,i.Lk)("button",{onClick:e=>X.confirmDeleteSurvey(t),class:"delete-survey-btn"}," üóëÔ∏è –£–¥–∞–ª–∏—Ç—å ",8,I)])])))),128))]))]),(0,i.bF)(U,{show:Q.showTemplateEditor,template:Q.editingTemplate,"survey-type":Q.selectedType,onClose:X.closeTemplateEditor,onSaved:X.onTemplateSaved},null,8,["show","template","survey-type","onClose","onSaved"]),(0,i.bF)(A,{show:Q.showQuestionPreview,questions:Q.previewQuestions,"survey-title":Q.surveyTitle,"survey-type":Q.selectedType,onClose:t[10]||(t[10]=e=>Q.showQuestionPreview=!1),onEditQuestions:X.openTemplateEditor,onConfirmCreate:X.confirmCreateSurvey},null,8,["show","questions","survey-title","survey-type","onEditQuestions","onConfirmCreate"])])}s(4114),s(8111),s(2489),s(116);var Q=s(4373);const X={key:0,class:"modal-overlay"},U={class:"modal template-editor"},A={class:"questions-editor"},V={class:"question-header"},F=["onUpdate:modelValue"],K=["onUpdate:modelValue"],P=["onClick"],B={key:0,class:"options-editor"},J=["onUpdate:modelValue"],M=["onClick"],N=["onClick"],z={key:1,class:"scale-editor"},D=["onUpdate:modelValue"],O=["onUpdate:modelValue"],R={key:2,class:"matrix-editor"},W=["onUpdate:modelValue"],H=["onClick"],j=["onClick"],G=["onUpdate:modelValue"],Y=["onClick"],Z=["onClick"],ee={class:"modal-buttons"};function te(e,t,s,a,n,r){return s.show?((0,i.uX)(),(0,i.CE)("div",X,[(0,i.Lk)("div",U,[(0,i.Lk)("h2",null,(0,o.v_)(r.isEditing?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω":"–°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω"),1),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.templateName=e),placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞",class:"template-input"},null,512),[[l.Jo,n.templateName]]),(0,i.Lk)("div",A,[t[10]||(t[10]=(0,i.Lk)("h3",null,"–í–æ–ø—Ä–æ—Å—ã",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.questions,((e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:"question-item"},[(0,i.Lk)("div",V,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t=>e.question=t,placeholder:"–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞",class:"question-text"},null,8,F),[[l.Jo,e.question]]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t=>e.type=t,class:"question-type"},t[4]||(t[4]=[(0,i.Fv)('<option value="text" data-v-0be3fc7d>–¢–µ–∫—Å—Ç</option><option value="textarea" data-v-0be3fc7d>–î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç</option><option value="radio" data-v-0be3fc7d>–í—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞</option><option value="scale" data-v-0be3fc7d>–®–∫–∞–ª–∞ –æ—Ü–µ–Ω–∫–∏</option><option value="matrix" data-v-0be3fc7d>–ú–∞—Ç—Ä–∏—Ü–∞ –æ—Ü–µ–Ω–æ–∫</option>',5)]),8,K),[[l.u1,e.type]]),(0,i.Lk)("button",{onClick:e=>r.removeQuestion(s),class:"remove-btn"},"–£–¥–∞–ª–∏—Ç—å",8,P)]),"radio"===e.type?((0,i.uX)(),(0,i.CE)("div",B,[t[5]||(t[5]=(0,i.Lk)("h4",null,"–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤:",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.options,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"option-item"},[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t=>e.text=t,placeholder:"–¢–µ–∫—Å—Ç –≤–∞—Ä–∏–∞–Ω—Ç–∞"},null,8,J),[[l.Jo,e.text]]),(0,i.Lk)("button",{onClick:e=>r.removeOption(s,t),class:"remove-option-btn"},"√ó",8,M)])))),128)),(0,i.Lk)("button",{onClick:e=>r.addOption(s),class:"add-option-btn"},"–î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç",8,N)])):(0,i.Q3)("",!0),"scale"===e.type?((0,i.uX)(),(0,i.CE)("div",z,[(0,i.Lk)("label",null,[t[6]||(t[6]=(0,i.eW)("–ú–∏–Ω–∏–º—É–º: ")),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t=>e.min=t,type:"number"},null,8,D),[[l.Jo,e.min,void 0,{number:!0}]])]),(0,i.Lk)("label",null,[t[7]||(t[7]=(0,i.eW)("–ú–∞–∫—Å–∏–º—É–º: ")),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t=>e.max=t,type:"number"},null,8,O),[[l.Jo,e.max,void 0,{number:!0}]])])])):(0,i.Q3)("",!0),"matrix"===e.type?((0,i.uX)(),(0,i.CE)("div",R,[t[8]||(t[8]=(0,i.Lk)("h4",null,"–°—Ç—Ä–æ–∫–∏ –º–∞—Ç—Ä–∏—Ü—ã:",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.rows,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"matrix-row"},[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t=>e.text=t,placeholder:"–¢–µ–∫—Å—Ç —Å—Ç—Ä–æ–∫–∏"},null,8,W),[[l.Jo,e.text]]),(0,i.Lk)("button",{onClick:e=>r.removeMatrixRow(s,t),class:"remove-option-btn"},"√ó",8,H)])))),128)),(0,i.Lk)("button",{onClick:e=>r.addMatrixRow(s),class:"add-option-btn"},"–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É",8,j),t[9]||(t[9]=(0,i.Lk)("h4",null,"–ö–æ–ª–æ–Ω–∫–∏ –º–∞—Ç—Ä–∏—Ü—ã:",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.columns,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"matrix-col"},[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t=>e.text=t,placeholder:"–¢–µ–∫—Å—Ç –∫–æ–ª–æ–Ω–∫–∏"},null,8,G),[[l.Jo,e.text]]),(0,i.Lk)("button",{onClick:e=>r.removeMatrixCol(s,t),class:"remove-option-btn"},"√ó",8,Y)])))),128)),(0,i.Lk)("button",{onClick:e=>r.addMatrixCol(s),class:"add-option-btn"},"–î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É",8,Z)])):(0,i.Q3)("",!0)])))),128)),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.addQuestion&&r.addQuestion(...e)),class:"add-question-btn"},"–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å")]),(0,i.Lk)("div",ee,[(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.saveTemplate&&r.saveTemplate(...e)),class:"confirm-btn"},"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"),(0,i.Lk)("button",{onClick:t[3]||(t[3]=t=>e.$emit("close")),class:"cancel-btn"},"–û—Ç–º–µ–Ω–∞")])])])):(0,i.Q3)("",!0)}var se={name:"TemplateEditor",props:{show:Boolean,template:Object,surveyType:String},data(){return{templateName:"",questions:[]}},computed:{isEditing(){return!!this.template}},watch:{template:{handler(e){e?(this.templateName=e.name,this.questions=JSON.parse(JSON.stringify(e.questions))):this.resetForm()},immediate:!0}},methods:{resetForm(){this.templateName="",this.questions=[]},addQuestion(){this.questions.push({id:Date.now(),type:"text",question:"",required:!1})},removeQuestion(e){this.questions.splice(e,1)},addOption(e){this.questions[e].options||(this.questions[e].options=[]),this.questions[e].options.push({text:"",value:""})},removeOption(e,t){this.questions[e].options.splice(t,1)},addMatrixRow(e){this.questions[e].rows||(this.questions[e].rows=[]),this.questions[e].rows.push({text:"",value:""})},removeMatrixRow(e,t){this.questions[e].rows.splice(t,1)},addMatrixCol(e){this.questions[e].columns||(this.questions[e].columns=[]),this.questions[e].columns.push({text:"",value:""})},removeMatrixCol(e,t){this.questions[e].columns.splice(t,1)},async saveTemplate(){try{const e=localStorage.getItem("token");if(!this.templateName.trim())return void alert("–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ");if(!this.questions||0===this.questions.length)return void alert("–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å");for(let s=0;s<this.questions.length;s++){const e=this.questions[s];if(!e.question||!e.question.trim())return void alert(`–í–æ–ø—Ä–æ—Å ${s+1}: –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω`);if(!e.type)return void alert(`–í–æ–ø—Ä–æ—Å ${s+1}: –¢–∏–ø –≤–æ–ø—Ä–æ—Å–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω`)}const t={name:this.templateName,survey_type:this.surveyType,questions:this.questions};if(this.isEditing){console.log("Making PUT request to:",`/api/survey-templates/${this.template.id}`);const s=await Q.A.put(`/api/survey-templates/${this.template.id}`,t,{headers:{Authorization:`Bearer ${e}`}});s.data.template_id?(console.log("New template created with ID:",s.data.template_id),alert("–®–∞–±–ª–æ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∫–∞–∫ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —à–∞–±–ª–æ–Ω!")):(console.log("Template updated successfully"),alert("–®–∞–±–ª–æ–Ω –æ–±–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!"))}else console.log("Making POST request to:","/api/survey-templates"),await Q.A.post("/api/survey-templates",t,{headers:{Authorization:`Bearer ${e}`}}),alert("–®–∞–±–ª–æ–Ω —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!");this.$emit("saved"),this.$emit("close")}catch(e){console.error("Error saving template:",e),console.error("Response data:",e.response?.data);const t=e.response?.data?.error||e.response?.data?.message||e.message;alert(`–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞: ${t}`)}}}},ie=s(1241);const oe=(0,ie.A)(se,[["render",te],["__scopeId","data-v-0be3fc7d"]]);var le=oe;const ae={key:0,class:"modal-overlay"},ne={class:"modal question-preview"},re={class:"questions-list"},ue={class:"question-header"},ce={class:"question-number"},de={class:"question-text"},pe={class:"question-type"},ve={key:0,class:"question-options"},me={key:1,class:"matrix-preview"},ye={class:"matrix-rows"},he={key:2,class:"scale-preview"},ke={class:"scale-info"},Te={class:"modal-buttons"};function be(e,t,s,l,a,n){return s.show?((0,i.uX)(),(0,i.CE)("div",ae,[(0,i.Lk)("div",ne,[(0,i.Lk)("h2",null,"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤–æ–ø—Ä–æ—Å–æ–≤: "+(0,o.v_)(s.surveyTitle),1),(0,i.Lk)("div",re,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.questions,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"question-item"},[(0,i.Lk)("div",ue,[(0,i.Lk)("span",ce,(0,o.v_)(t+1)+".",1),(0,i.Lk)("span",de,(0,o.v_)(e.question),1),(0,i.Lk)("span",pe,(0,o.v_)(n.getQuestionTypeLabel(e.type)),1)]),e.options?((0,i.uX)(),(0,i.CE)("div",ve,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.options,(e=>((0,i.uX)(),(0,i.CE)("span",{key:e.value,class:"option-tag"},(0,o.v_)(e.text),1)))),128))])):(0,i.Q3)("",!0),"matrix"===e.type?((0,i.uX)(),(0,i.CE)("div",me,[(0,i.Lk)("div",ye,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.rows,(e=>((0,i.uX)(),(0,i.CE)("span",{key:e.value,class:"row-tag"},(0,o.v_)(e.text),1)))),128))])])):(0,i.Q3)("",!0),"scale"===e.type?((0,i.uX)(),(0,i.CE)("div",he,[(0,i.Lk)("span",ke,"–®–∫–∞–ª–∞: "+(0,o.v_)(e.min||1)+" - "+(0,o.v_)(e.max||10),1)])):(0,i.Q3)("",!0)])))),128))]),(0,i.Lk)("div",Te,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.editQuestions&&n.editQuestions(...e)),class:"edit-btn"},"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã"),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.confirmCreate&&n.confirmCreate(...e)),class:"confirm-btn"},"–°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å–Ω–∏–∫"),(0,i.Lk)("button",{onClick:t[2]||(t[2]=t=>e.$emit("close")),class:"cancel-btn"},"–û—Ç–º–µ–Ω–∞")])])])):(0,i.Q3)("",!0)}var Ce={name:"QuestionPreview",props:{show:Boolean,questions:Array,surveyTitle:String,surveyType:String},methods:{getQuestionTypeLabel(e){const t={text:"–¢–µ–∫—Å—Ç",textarea:"–î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç",radio:"–í—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞",scale:"–®–∫–∞–ª–∞ –æ—Ü–µ–Ω–∫–∏",matrix:"–ú–∞—Ç—Ä–∏—Ü–∞ –æ—Ü–µ–Ω–æ–∫"};return t[e]||e},editQuestions(){this.$emit("edit-questions")},confirmCreate(){this.$emit("confirm-create")}}};const qe=(0,ie.A)(Ce,[["render",be],["__scopeId","data-v-14ba9a24"]]);var Le=qe,we={name:"SurveyList",components:{TemplateEditor:le,QuestionPreview:Le},data(){return{selectedType:"",surveyTitle:"",selectedTeamId:"",selectedEmployeeId:"",selectedTemplateId:"",useTeamSelection:!1,useEmployeeSelection:!1,teams:[],employees:[],surveys:[],availableTemplates:[],loading:!1,showTemplateEditor:!1,editingTemplate:null,showQuestionPreview:!1,previewQuestions:[]}},computed:{canCreateSurvey(){return this.surveyTitle&&(!this.useTeamSelection||this.selectedTeamId)&&(!this.useEmployeeSelection||this.selectedEmployeeId)}},async mounted(){await this.fetchTeams(),await this.fetchEmployees(),await this.fetchSurveys()},methods:{selectSurveyType(e){this.selectedType=e,this.selectedTeamId="",this.selectedEmployeeId="",this.selectedTemplateId="",this.useTeamSelection=!1,this.useEmployeeSelection=!1,this.fetchTemplates(),"enps"===e?this.fetchTeams():"360"===e&&this.fetchEmployees()},async fetchTemplates(){try{const e=localStorage.getItem("token"),t=await Q.A.get("/api/survey-templates",{headers:{Authorization:`Bearer ${e}`}});this.availableTemplates=t.data.filter((e=>e.survey_type===this.selectedType||"custom"===e.survey_type))}catch(e){console.error("Error fetching templates:",e)}},editTemplate(){this.selectedTemplateId?this.editingTemplate=this.availableTemplates.find((e=>e.id===this.selectedTemplateId)):this.editingTemplate=null,this.showTemplateEditor=!0},closeTemplateEditor(){this.showTemplateEditor=!1,this.editingTemplate=null},async onTemplateSaved(){await this.fetchTemplates()},async fetchTeams(){try{const e=localStorage.getItem("token"),t=await Q.A.get("/user_teams",{headers:{Authorization:`Bearer ${e}`}});this.teams=t.data}catch(e){console.error("Error fetching teams:",e)}},async fetchEmployees(){try{const e=localStorage.getItem("token"),t=await Q.A.get("/api/employees",{headers:{Authorization:`Bearer ${e}`}});this.employees=t.data}catch(e){console.error("Error fetching employees:",e)}},async fetchSurveys(){try{this.loading=!0;const e=localStorage.getItem("token"),t=await Q.A.get("/api/surveys",{headers:{Authorization:`Bearer ${e}`}});this.surveys=t.data}catch(e){console.error("Error fetching surveys:",e)}finally{this.loading=!1}},async createSurvey(){let e=null;if(this.selectedTemplateId){const t=this.availableTemplates.find((e=>e.id===this.selectedTemplateId));e=t.questions}else e="enps"===this.selectedType?this.getDefaultEnpsQuestions():this.getDefault360Questions();this.previewQuestions=e,this.showQuestionPreview=!0},async confirmCreateSurvey(){try{const t=localStorage.getItem("token"),s={survey_type:this.selectedType,title:this.surveyTitle,team_id:this.useTeamSelection?this.selectedTeamId:null,target_employee_id:this.useEmployeeSelection?this.selectedEmployeeId:null,questions:this.previewQuestions},i=await Q.A.post("/api/surveys",s,{headers:{Authorization:`Bearer ${t}`}}),o=i.data.access_token,l=`${window.location.origin}/survey/${o}`;try{await navigator.clipboard.writeText(l),alert(`${this.$t("surveys.surveyCreated")}\n\n–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!`)}catch(e){console.error("Clipboard error:",e),alert(`${this.$t("surveys.surveyCreated")}\n\n–°—Å—ã–ª–∫–∞: ${l}`)}this.resetForm(),this.showQuestionPreview=!1,await this.fetchSurveys()}catch(t){console.error("Error creating survey:",t),alert("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø—Ä–æ—Å–Ω–∏–∫–∞")}},confirmDeleteSurvey(e){confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –æ–ø—Ä–æ—Å–Ω–∏–∫ "${e.title}"?`)&&this.deleteSurvey(e.id)},async deleteSurvey(e){try{const t=localStorage.getItem("token");await Q.A.delete(`/api/surveys/${e}`,{headers:{Authorization:`Bearer ${t}`}}),alert("–û–ø—Ä–æ—Å–Ω–∏–∫ —É–¥–∞–ª–µ–Ω!"),await this.fetchSurveys()}catch(t){console.error("Error deleting survey:",t),alert("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –æ–ø—Ä–æ—Å–Ω–∏–∫–∞")}},resetForm(){this.selectedType="",this.surveyTitle="",this.selectedTeamId="",this.selectedEmployeeId="",this.selectedTemplateId="",this.useTeamSelection=!1,this.useEmployeeSelection=!1,this.previewQuestions=[]},getDefaultEnpsQuestions(){return[{id:1,type:"radio",question:"–í –∫–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ?",required:!0,options:[{text:"–£–¥–∞–ª–µ–Ω–Ω–æ",value:"remote"},{text:"–í –æ—Ñ–∏—Å–µ",value:"office"},{text:"–ì–∏–±—Ä–∏–¥–Ω–æ",value:"hybrid"}]},{id:2,type:"scale",question:"–ù–∞—Å–∫–æ–ª—å–∫–æ –≤—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω—ã —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç–æ–π?",required:!0,min:1,max:10},{id:3,type:"scale",question:"–ù–∞—Å–∫–æ–ª—å–∫–æ –≤–µ—Ä–æ—è—Ç–Ω–æ, —á—Ç–æ –≤—ã –ø–æ—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç–µ –Ω–∞—à—É –∫–æ–º–ø–∞–Ω–∏—é –∫–∞–∫ –º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã –¥—Ä—É–∑—å—è–º –∏–ª–∏ –∫–æ–ª–ª–µ–≥–∞–º?",required:!0,min:0,max:10},{id:4,type:"scale",question:"–ù–∞—Å–∫–æ–ª—å–∫–æ –≤—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω—ã –±–∞–ª–∞–Ω—Å–æ–º —Ä–∞–±–æ—Ç—ã –∏ –ª–∏—á–Ω–æ–π –∂–∏–∑–Ω–∏?",required:!0,min:1,max:10},{id:5,type:"scale",question:"–ù–∞—Å–∫–æ–ª—å–∫–æ –≤—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω—ã –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è?",required:!0,min:1,max:10},{id:6,type:"scale",question:"–ù–∞—Å–∫–æ–ª—å–∫–æ –≤—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω—ã –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏ —Å –∫–æ–ª–ª–µ–≥–∞–º–∏?",required:!0,min:1,max:10},{id:7,type:"scale",question:"–ù–∞—Å–∫–æ–ª—å–∫–æ –≤—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º?",required:!0,min:1,max:10},{id:8,type:"textarea",question:"–ß—Ç–æ –≤–∞–º –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –Ω—Ä–∞–≤–∏—Ç—Å—è –≤ —Ä–∞–±–æ—Ç–µ –≤ –Ω–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏?",required:!1},{id:9,type:"textarea",question:"–ß—Ç–æ –±—ã –≤—ã —Ö–æ—Ç–µ–ª–∏ —É–ª—É—á—à–∏—Ç—å –≤ –Ω–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏?",required:!1}]},getDefault360Questions(){return[{id:1,type:"text",question:"–í–∞—à–µ –∏–º—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",required:!1},{id:2,type:"text",question:"–í–∞—à–∞ —Ä–æ–ª—å/–¥–æ–ª–∂–Ω–æ—Å—Ç—å",required:!1},{id:3,type:"radio",question:"–í–∞—à–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –æ—Ü–µ–Ω–∏–≤–∞–µ–º—ã–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º",required:!0,options:[{text:"–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å",value:"manager"},{text:"–ö–æ–ª–ª–µ–≥–∞",value:"peer"},{text:"–ü–æ–¥—á–∏–Ω–µ–Ω–Ω—ã–π",value:"subordinate"},{text:"–ö–ª–∏–µ–Ω—Ç/–ü–∞—Ä—Ç–Ω–µ—Ä",value:"external"}]},{id:4,type:"matrix",question:"–û—Ü–µ–Ω–∏—Ç–µ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø–æ —à–∫–∞–ª–µ –æ—Ç 1 –¥–æ 5",required:!0,rows:[{text:"–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏",value:"professional_skills"},{text:"–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è",value:"communication"},{text:"–õ–∏–¥–µ—Ä—Å—Ç–≤–æ",value:"leadership"},{text:"–†–∞–±–æ—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥–µ",value:"teamwork"},{text:"–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º",value:"problem_solving"},{text:"–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å",value:"adaptability"}],columns:[{text:"1 - –ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ",value:"1"},{text:"2 - –ù–∏–∂–µ –æ–∂–∏–¥–∞–Ω–∏–π",value:"2"},{text:"3 - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º",value:"3"},{text:"4 - –ü—Ä–µ–≤—ã—à–∞–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è",value:"4"},{text:"5 - –í—ã–¥–∞—é—â–∏–π—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç",value:"5"}]},{id:5,type:"textarea",question:"–ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –≥–ª–∞–≤–Ω—ã–º–∏ —Å–∏–ª—å–Ω—ã–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ —ç—Ç–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞?",required:!1},{id:6,type:"textarea",question:"–í –∫–∞–∫–∏—Ö –æ–±–ª–∞—Å—Ç—è—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –º–æ–≥ –±—ã —É–ª—É—á—à–∏—Ç—å—Å—è?",required:!1}]},openTemplateEditor(){this.showQuestionPreview=!1,this.editingTemplate={name:`–ö–∞—Å—Ç–æ–º–Ω—ã–π ${this.selectedType.toUpperCase()} —à–∞–±–ª–æ–Ω`,survey_type:this.selectedType,questions:this.previewQuestions},this.showTemplateEditor=!0},viewResults(e){this.$router.push(`/survey/${e}/results`)},async copySurveyLink(e){try{const t=`${window.location.origin}/survey/${e.access_token}`;await navigator.clipboard.writeText(t),alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!")}catch(t){console.error("Error copying link:",t)}}}};const Ee=(0,ie.A)(we,[["render",$],["__scopeId","data-v-4ccbbb3f"]]);var xe=Ee}}]);
//# sourceMappingURL=633.215ae51b.js.map