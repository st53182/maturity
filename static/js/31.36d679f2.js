"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[31],{1031:function(e,a,t){t.r(a),t.d(a,{default:function(){return F}});var l=t(6768),o=t(4232),s=t(5130);const i={class:"motivation-container"},r=["onClick"],n=["src"],m={class:"card-header"},c=["onClick"],d={class:"team-name"},u={class:"disc-type"},p={key:0,class:"factors"},k={class:"column"},h={class:"column"},f={class:"form-group"},y=["value"],v={class:"form-group"},L=["disabled"],b={key:0,class:"result-block"},_=["innerHTML"];function C(e,a,t,C,g,E){return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",i,[a[11]||(a[11]=(0,l.Lk)("h1",null,"ðŸŽ¯ ÐœÐ¾Ñ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(g.employees,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"employee-card",onClick:a=>E.selectEmployee(e)},[(0,l.Lk)("img",{class:"avatar",src:E.getAvatarUrl(e.ai_analysis),alt:"avatar"},null,8,n),(0,l.Lk)("div",m,[(0,l.Lk)("h4",null,(0,o.v_)(e.name),1),(0,l.Lk)("button",{onClick:(0,s.D$)((a=>E.deleteEmployee(e.id)),["stop"])},"ðŸ—‘",8,c)]),(0,l.Lk)("p",d,"ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: "+(0,o.v_)(E.getTeamName(e.team_id)||"â€”"),1),(0,l.Lk)("span",u,(0,o.v_)(E.extractDISCType(e.ai_analysis)),1),e.ai_analysis?((0,l.uX)(),(0,l.CE)("div",p,[(0,l.Lk)("div",k,[a[9]||(a[9]=(0,l.Lk)("h5",null,"â¬†ï¸ ÐœÐ¾Ñ‚Ð¸Ð²Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ðµ",-1)),(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(E.extractFactors(e.ai_analysis,"ÐœÐ¾Ñ‚Ð¸Ð²Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ðµ"),(e=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,o.v_)(e),1)))),128))])]),(0,l.Lk)("div",h,[a[10]||(a[10]=(0,l.Lk)("h5",null,"â¬‡ï¸ Ð”ÐµÐ¼Ð¾Ñ‚Ð¸Ð²Ð°Ñ‚Ð¾Ñ€Ñ‹",-1)),(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(E.extractFactors(e.ai_analysis,"Ð”ÐµÐ¼Ð¾Ñ‚Ð¸Ð²Ð°Ñ‚Ð¾Ñ€Ñ‹"),(e=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,o.v_)(e),1)))),128))])])])):(0,l.Q3)("",!0)],8,r)))),128))]),(0,l.Lk)("div",{class:"employee-card add-card",onClick:a[0]||(a[0]=(...e)=>E.resetForm&&E.resetForm(...e))},a[12]||(a[12]=[(0,l.Lk)("span",null,"âž•",-1),(0,l.Lk)("p",null,"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ",-1)])),(0,l.Lk)("form",{onSubmit:a[8]||(a[8]=(0,s.D$)(((...e)=>E.submitMotivation&&E.submitMotivation(...e)),["prevent"]))},[(0,l.Lk)("div",f,[a[14]||(a[14]=(0,l.Lk)("label",null,"Ð˜Ð¼Ñ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>g.form.name=e),placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Ð˜Ð²Ð°Ð½ Ð˜Ð²Ð°Ð½Ð¾Ð²",required:""},null,512),[[s.Jo,g.form.name]]),a[15]||(a[15]=(0,l.Lk)("label",null,"Ð”Ð¾Ð»Ð¶Ð½Ð¾ÑÑ‚ÑŒ:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>g.form.role=e),placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸Ðº, Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº...",required:""},null,512),[[s.Jo,g.form.role]]),a[16]||(a[16]=(0,l.Lk)("label",null,"ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>g.form.team_id=e),required:""},[a[13]||(a[13]=(0,l.Lk)("option",{disabled:"",value:""},"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(g.teams,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.name),9,y)))),128))],512),[[s.u1,g.form.team_id]])]),(0,l.Lk)("div",v,[a[17]||(a[17]=(0,l.Lk)("label",null,"1. ÐŸÐ¾Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ Ð² ÑÑ‚Ñ€ÐµÑÑÐ¾Ð²Ð¾Ð¹ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¸",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[4]||(a[4]=e=>g.form.stress=e),placeholder:"ÐšÐ°Ðº Ð¾Ð½ Ñ€ÐµÐ°Ð³Ð¸Ñ€ÑƒÐµÑ‚ Ð½Ð° Ð´Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ, ÐºÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚Ñ‹...",required:""},null,512),[[s.Jo,g.form.stress]]),a[18]||(a[18]=(0,l.Lk)("label",null,"2. Ð’Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ñ Ð´Ñ€ÑƒÐ³Ð¸Ð¼Ð¸",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[5]||(a[5]=e=>g.form.communication=e),placeholder:"ÐžÑ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ð¹, ÑÐ´ÐµÑ€Ð¶Ð°Ð½Ð½Ñ‹Ð¹, Ð»ÑŽÐ±Ð¸Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð² ÐºÐ¾Ð¼Ð°Ð½Ð´Ðµ Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½...",required:""},null,512),[[s.Jo,g.form.communication]]),a[19]||(a[19]=(0,l.Lk)("label",null,"3. ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ðµ",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[6]||(a[6]=e=>g.form.behavior=e),placeholder:"ÐŸÑ€Ð¸Ð²Ñ‹Ñ‡ÐºÐ¸, Ð¿Ð¾Ð´Ñ…Ð¾Ð´, ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°, Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ...",required:""},null,512),[[s.Jo,g.form.behavior]]),a[20]||(a[20]=(0,l.Lk)("label",null,"4. Ð ÐµÐ°ÐºÑ†Ð¸Ð¸ Ð½Ð° ÐºÑ€Ð¸Ñ‚Ð¸ÐºÑƒ Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[7]||(a[7]=e=>g.form.feedback=e),placeholder:"ÐšÐ°Ðº Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ñ„Ð¸Ð´Ð±ÐµÐº, Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ Ðº Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð°Ð¼...",required:""},null,512),[[s.Jo,g.form.feedback]])]),(0,l.Lk)("button",{type:"submit",disabled:g.loading},(0,o.v_)(g.loading?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð¸ Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸"),9,L)],32),g.result?((0,l.uX)(),(0,l.CE)("div",b,[a[21]||(a[21]=(0,l.Lk)("h2",null,"ðŸ“‹ Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸",-1)),(0,l.Lk)("div",{class:"ai-analysis",innerHTML:g.result},null,8,_)])):(0,l.Q3)("",!0)],64)}t(4114),t(8111),t(2489),t(116),t(1701);var g={data(){return{form:{id:null,name:"",role:"",team_id:"",stress:"",communication:"",behavior:"",feedback:""},teams:[],employees:[],discProfiles:[],result:"",loading:!1}},async mounted(){const e=localStorage.getItem("token"),a=await fetch("/user_teams",{headers:{Authorization:`Bearer ${e}`}});this.teams=await a.json();const t=await fetch("/employees"),l=await t.json(),o=await fetch("/static/disc_profiles_for_frontend.json");this.discProfiles=await o.json(),this.employees=l.map((e=>({...e,motivators:this.extractFactors(e.ai_analysis,"ÐœÐ¾Ñ‚Ð¸Ð²Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ðµ"),demotivators:this.extractFactors(e.ai_analysis,"Ð”ÐµÐ¼Ð¾Ñ‚Ð¸Ð²Ð°Ñ‚Ð¾Ñ€Ñ‹")})))},methods:{async submitMotivation(){this.loading=!0;try{const e=await fetch("/motivation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.form)}),a=await e.json();if(e.ok){this.result=a.analysis,this.form.id=a.employee_id;const e=this.employees.findIndex((e=>e.id===a.employee_id)),t={...this.form,id:a.employee_id,ai_analysis:a.analysis,motivators:this.extractFactors(a.analysis,"ÐœÐ¾Ñ‚Ð¸Ð²Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ðµ"),demotivators:this.extractFactors(a.analysis,"Ð”ÐµÐ¼Ð¾Ñ‚Ð¸Ð²Ð°Ñ‚Ð¾Ñ€Ñ‹")};-1!==e?this.employees.splice(e,1,t):this.employees.push(t)}else alert(a.error)}catch(e){alert("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ")}finally{this.loading=!1}},resetForm(){this.form={id:null,name:"",role:"",team_id:"",stress:"",communication:"",behavior:"",feedback:""},this.result=""},async deleteEmployee(e){confirm("Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°?")&&(await fetch(`/employee/${e}`,{method:"DELETE"}),this.employees=this.employees.filter((a=>a.id!==e)))},selectEmployee(e){this.form={id:e.id,name:e.name,role:e.role,team_id:e.team_id,stress:e.stress,communication:e.communication,behavior:e.behavior,feedback:e.feedback},this.result=e.ai_analysis},extractFactors(e,a){const t=e?.match(new RegExp(`\\*\\*${a} Ñ„Ð°ÐºÑ‚Ð¾Ñ€Ñ‹:\\*\\*(.*?)\\*\\*`,"s"));return t?t[1].split(/[-â€“â€¢]/).map((e=>e.trim())).filter((e=>e.length>3)):[]},extractDISCType(e){const a=e?.match(/\*\*Ð¢Ð¸Ð¿ DISC:\*\*\s*(.*?)(\*\*|$)/);return a?a[1].trim():"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾"},getTeamName(e){const a=this.teams.find((a=>a.id===e));return a?a.name:"â€”"},getAvatarUrl(e){const a=this.extractDISCType(e),t=a?.toLowerCase().split(" ")[0].replace(/[^\w]/g,"");return`/avatars/${t||"default"}.png`}}},E=t(1241);const x=(0,E.A)(g,[["render",C]]);var F=x}}]);
//# sourceMappingURL=31.36d679f2.js.map