"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[617],{7617:function(e,t,n){n.r(t),n.d(t,{default:function(){return be}});var i=n(6768),s=n(4232),o=n(5130);const l={class:"meeting-design-container"},a={key:0,class:"loading"},r={key:1,class:"error"},g={key:2},c={class:"action-buttons"},d={key:0,class:"no-designs"},u={key:1,class:"designs-grid"},k={class:"design-actions"},m=["onClick"],v=["onClick"],h={class:"modal create-modal"},p={class:"form-group"},D={class:"form-group"},L={value:"retrospective"},b={value:"planning"},_={value:"brainstorm"},$={value:"workshop"},w={value:"standup"},y={value:"review"},C={value:"kickoff"},f={value:"training"},E={class:"form-group"},B={class:"form-group"},M={value:"15"},x={value:"30"},X={value:"45"},I={value:"60"},A={value:"90"},V={value:"120"},U={value:"180"},S={value:"240"},W={value:"300"},T={value:"360"},z={value:"420"},J={value:"480"},F={value:"960"},G={class:"form-group"},P=["value"],R={class:"form-group"},K={class:"constraint-labels"},Q=["value"],j={class:"modal-buttons"},N=["disabled"],O={class:"modal view-modal"},H={class:"modal-header"},q={class:"design-info"},Y={key:0},Z={class:"blocks-container"},ee={class:"block-header"},te={class:"block-time"},ne={class:"block-duration"},ie={class:"block-actions"},se=["onClick","disabled"],oe=["onClick"],le={class:"block-content"},ae={class:"modal-buttons"},re=["disabled"],ge={class:"modal edit-modal"},ce={class:"form-group"},de={class:"form-group"},ue={class:"form-group"},ke={class:"form-group"},me={class:"modal-buttons"};function ve(e,t,n,ve,he,pe){return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("h1",null,(0,s.v_)(e.$t("meetingDesign.title")),1),he.loading?((0,i.uX)(),(0,i.CE)("div",a,"⏳ "+(0,s.v_)(e.$t("common.loading")),1)):he.error?((0,i.uX)(),(0,i.CE)("div",r,"❌ "+(0,s.v_)(he.error),1)):((0,i.uX)(),(0,i.CE)("div",g,[(0,i.Lk)("div",c,[(0,i.Lk)("button",{class:"create-btn",onClick:t[0]||(t[0]=e=>he.showCreateModal=!0)}," ➕ "+(0,s.v_)(e.$t("meetingDesign.createNew")),1)]),0===he.designs.length?((0,i.uX)(),(0,i.CE)("div",d,[(0,i.Lk)("p",null,(0,s.v_)(e.$t("meetingDesign.noDesigns")),1)])):((0,i.uX)(),(0,i.CE)("div",u,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(he.designs,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t.id,class:"design-card"},[(0,i.Lk)("h3",null,(0,s.v_)(t.title),1),(0,i.Lk)("p",null,[(0,i.Lk)("strong",null,(0,s.v_)(e.$t("meetingDesign.meetingType"))+":",1),(0,i.eW)(" "+(0,s.v_)(t.meeting_type),1)]),(0,i.Lk)("p",null,[(0,i.Lk)("strong",null,(0,s.v_)(e.$t("meetingDesign.duration"))+":",1),(0,i.eW)(" "+(0,s.v_)(t.duration_minutes)+" "+(0,s.v_)(e.$t("meetingDesign.minutes")),1)]),(0,i.Lk)("p",null,[(0,i.Lk)("strong",null,(0,s.v_)(e.$t("meetingDesign.goal"))+":",1),(0,i.eW)(" "+(0,s.v_)(t.goal.substring(0,100))+"...",1)]),(0,i.Lk)("div",k,[(0,i.Lk)("button",{class:"view-btn",onClick:e=>pe.viewDesign(t)},"👁️ Просмотр",8,m),(0,i.Lk)("button",{class:"delete-btn",onClick:e=>pe.deleteDesign(t.id)},"🗑️ "+(0,s.v_)(e.$t("common.delete")),9,v)])])))),128))]))])),he.showCreateModal?((0,i.uX)(),(0,i.CE)("div",{key:3,class:"modal-overlay",onClick:t[10]||(t[10]=(0,o.D$)((e=>he.showCreateModal=!1),["self"]))},[(0,i.Lk)("div",h,[(0,i.Lk)("h2",null,(0,s.v_)(e.$t("meetingDesign.createNew")),1),(0,i.Lk)("div",p,[(0,i.Lk)("label",null,(0,s.v_)(e.$t("meetingDesign.meetingTitle")),1),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>he.newDesign.title=e),type:"text",class:"form-input"},null,512),[[o.Jo,he.newDesign.title]])]),(0,i.Lk)("div",D,[(0,i.Lk)("label",null,(0,s.v_)(e.$t("meetingDesign.meetingType")),1),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>he.newDesign.meeting_type=e),class:"form-select"},[(0,i.Lk)("option",L,(0,s.v_)(e.$t("meetingDesign.types.retrospective")),1),(0,i.Lk)("option",b,(0,s.v_)(e.$t("meetingDesign.types.planning")),1),(0,i.Lk)("option",_,(0,s.v_)(e.$t("meetingDesign.types.brainstorm")),1),(0,i.Lk)("option",$,(0,s.v_)(e.$t("meetingDesign.types.workshop")),1),(0,i.Lk)("option",w,(0,s.v_)(e.$t("meetingDesign.types.standup")),1),(0,i.Lk)("option",y,(0,s.v_)(e.$t("meetingDesign.types.review")),1),(0,i.Lk)("option",C,(0,s.v_)(e.$t("meetingDesign.types.kickoff")),1),(0,i.Lk)("option",f,(0,s.v_)(e.$t("meetingDesign.types.training")),1)],512),[[o.u1,he.newDesign.meeting_type]])]),(0,i.Lk)("div",E,[(0,i.Lk)("label",null,(0,s.v_)(e.$t("meetingDesign.goal")),1),(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>he.newDesign.goal=e),class:"form-textarea",rows:"3"},null,512),[[o.Jo,he.newDesign.goal]])]),(0,i.Lk)("div",B,[(0,i.Lk)("label",null,(0,s.v_)(e.$t("meetingDesign.duration")),1),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>he.newDesign.duration_minutes=e),class:"form-select"},[(0,i.Lk)("option",M,"15 "+(0,s.v_)(e.$t("meetingDesign.minutes")),1),(0,i.Lk)("option",x,"30 "+(0,s.v_)(e.$t("meetingDesign.minutes")),1),(0,i.Lk)("option",X,"45 "+(0,s.v_)(e.$t("meetingDesign.minutes")),1),(0,i.Lk)("option",I,"1 "+(0,s.v_)(e.$t("meetingDesign.hours")),1),(0,i.Lk)("option",A,"1.5 "+(0,s.v_)(e.$t("meetingDesign.hours")),1),(0,i.Lk)("option",V,"2 "+(0,s.v_)(e.$t("meetingDesign.hours")),1),(0,i.Lk)("option",U,"3 "+(0,s.v_)(e.$t("meetingDesign.hours")),1),(0,i.Lk)("option",S,"4 "+(0,s.v_)(e.$t("meetingDesign.hours")),1),(0,i.Lk)("option",W,"5 "+(0,s.v_)(e.$t("meetingDesign.hours")),1),(0,i.Lk)("option",T,"6 "+(0,s.v_)(e.$t("meetingDesign.hours")),1),(0,i.Lk)("option",z,"7 "+(0,s.v_)(e.$t("meetingDesign.hours")),1),(0,i.Lk)("option",J,"8 "+(0,s.v_)(e.$t("meetingDesign.hours")),1),(0,i.Lk)("option",F,"16 "+(0,s.v_)(e.$t("meetingDesign.hours")),1)],512),[[o.u1,he.newDesign.duration_minutes]])]),(0,i.Lk)("div",G,[(0,i.Lk)("label",null,(0,s.v_)(e.$t("meetingDesign.selectTeam")),1),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>he.newDesign.team_id=e),class:"form-select"},[t[21]||(t[21]=(0,i.Lk)("option",{value:""},"Без команды",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(he.teams,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,s.v_)(e.name),9,P)))),128))],512),[[o.u1,he.newDesign.team_id]])]),(0,i.Lk)("div",R,[(0,i.Lk)("label",null,(0,s.v_)(e.$t("meetingDesign.constraints")),1),(0,i.Lk)("div",K,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(he.constraintLabels,((e,n)=>((0,i.uX)(),(0,i.CE)("label",{key:n,class:"constraint-label"},[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",value:n,"onUpdate:modelValue":t[6]||(t[6]=e=>he.selectedConstraints=e)},null,8,Q),[[o.lH,he.selectedConstraints]]),(0,i.eW)(" "+(0,s.v_)(e),1)])))),128))]),(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>he.newDesign.constraints=e),class:"form-textarea",rows:"2",placeholder:"Дополнительные ограничения..."},null,512),[[o.Jo,he.newDesign.constraints]])]),(0,i.Lk)("div",j,[(0,i.Lk)("button",{class:"confirm-btn",onClick:t[8]||(t[8]=(...e)=>pe.generateDesign&&pe.generateDesign(...e)),disabled:he.generating},(0,s.v_)(he.generating?e.$t("meetingDesign.creating"):e.$t("meetingDesign.generate")),9,N),(0,i.Lk)("button",{class:"cancel-btn",onClick:t[9]||(t[9]=(...e)=>pe.closeCreateModal&&pe.closeCreateModal(...e))},(0,s.v_)(e.$t("common.cancel")),1)])])])):(0,i.Q3)("",!0),he.showViewModal&&he.currentDesign?((0,i.uX)(),(0,i.CE)("div",{key:4,class:"modal-overlay",onClick:t[13]||(t[13]=(0,o.D$)((e=>he.showViewModal=!1),["self"]))},[(0,i.Lk)("div",O,[(0,i.Lk)("div",H,[(0,i.Lk)("h2",null,(0,s.v_)(he.currentDesign.title),1),(0,i.Lk)("button",{class:"close-btn",onClick:t[11]||(t[11]=e=>he.showViewModal=!1)},"✕")]),(0,i.Lk)("div",q,[(0,i.Lk)("p",null,[(0,i.Lk)("strong",null,(0,s.v_)(e.$t("meetingDesign.meetingType"))+":",1),(0,i.eW)(" "+(0,s.v_)(he.currentDesign.meeting_type),1)]),(0,i.Lk)("p",null,[(0,i.Lk)("strong",null,(0,s.v_)(e.$t("meetingDesign.goal"))+":",1),(0,i.eW)(" "+(0,s.v_)(he.currentDesign.goal),1)]),(0,i.Lk)("p",null,[(0,i.Lk)("strong",null,(0,s.v_)(e.$t("meetingDesign.duration"))+":",1),(0,i.eW)(" "+(0,s.v_)(he.currentDesign.duration_minutes)+" "+(0,s.v_)(e.$t("meetingDesign.minutes")),1)]),he.currentDesign.constraints?((0,i.uX)(),(0,i.CE)("p",Y,[(0,i.Lk)("strong",null,(0,s.v_)(e.$t("meetingDesign.constraints"))+":",1),(0,i.eW)(" "+(0,s.v_)(he.currentDesign.constraints),1)])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Z,[(0,i.Lk)("h3",null,(0,s.v_)(e.$t("meetingDesign.blocks")),1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(he.currentDesign.blocks,((t,n)=>((0,i.uX)(),(0,i.CE)("div",{key:n,class:"block-card"},[(0,i.Lk)("div",ee,[(0,i.Lk)("div",te,[(0,i.Lk)("strong",null,(0,s.v_)(t.time),1),(0,i.eW)(" - "+(0,s.v_)(t.title)+" ",1),(0,i.Lk)("span",ne,"("+(0,s.v_)(t.duration)+" мин)",1)]),(0,i.Lk)("div",ie,[(0,i.Lk)("button",{class:"regenerate-btn",onClick:e=>pe.regenerateBlock(n),disabled:he.regenerating===n},(0,s.v_)(he.regenerating===n?e.$t("meetingDesign.regenerating"):"🔄"),9,se),(0,i.Lk)("button",{class:"edit-btn",onClick:e=>pe.editBlock(n)},"✏️",8,oe)])]),(0,i.Lk)("div",le,[(0,i.Lk)("p",null,(0,s.v_)(t.description),1)])])))),128))]),(0,i.Lk)("div",ae,[(0,i.Lk)("button",{class:"save-btn",onClick:t[12]||(t[12]=(...e)=>pe.saveDesign&&pe.saveDesign(...e)),disabled:he.saving},(0,s.v_)(he.saving?e.$t("meetingDesign.saving"):e.$t("meetingDesign.save")),9,re)])])])):(0,i.Q3)("",!0),he.showEditModal&&he.editingBlock?((0,i.uX)(),(0,i.CE)("div",{key:5,class:"modal-overlay",onClick:t[20]||(t[20]=(0,o.D$)((e=>he.showEditModal=!1),["self"]))},[(0,i.Lk)("div",ge,[t[26]||(t[26]=(0,i.Lk)("h2",null,"Редактировать блок",-1)),(0,i.Lk)("div",ce,[t[22]||(t[22]=(0,i.Lk)("label",null,"Название",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>he.editingBlock.title=e),type:"text",class:"form-input"},null,512),[[o.Jo,he.editingBlock.title]])]),(0,i.Lk)("div",de,[t[23]||(t[23]=(0,i.Lk)("label",null,"Время",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>he.editingBlock.time=e),type:"text",class:"form-input"},null,512),[[o.Jo,he.editingBlock.time]])]),(0,i.Lk)("div",ue,[t[24]||(t[24]=(0,i.Lk)("label",null,"Продолжительность (минуты)",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>he.editingBlock.duration=e),type:"number",class:"form-input"},null,512),[[o.Jo,he.editingBlock.duration]])]),(0,i.Lk)("div",ke,[t[25]||(t[25]=(0,i.Lk)("label",null,"Описание",-1)),(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[17]||(t[17]=e=>he.editingBlock.description=e),class:"form-textarea",rows:"4"},null,512),[[o.Jo,he.editingBlock.description]])]),(0,i.Lk)("div",me,[(0,i.Lk)("button",{class:"confirm-btn",onClick:t[18]||(t[18]=(...e)=>pe.saveBlockEdit&&pe.saveBlockEdit(...e))},(0,s.v_)(e.$t("common.save")),1),(0,i.Lk)("button",{class:"cancel-btn",onClick:t[19]||(t[19]=e=>he.showEditModal=!1)},(0,s.v_)(e.$t("common.cancel")),1)])])])):(0,i.Q3)("",!0)])}n(8111),n(2489),n(1701),n(4603),n(7566),n(8721);var he=n(4373),pe={name:"MeetingDesign",data(){return{designs:[],teams:[],loading:!0,error:null,showCreateModal:!1,showViewModal:!1,showEditModal:!1,generating:!1,saving:!1,regenerating:null,currentDesign:null,editingBlock:null,editingBlockIndex:null,selectedConstraints:[],newDesign:{title:"",meeting_type:"retrospective",goal:"",duration_minutes:60,team_id:"",constraints:""},constraintLabels:{}}},async mounted(){this.constraintLabels={remote:this.$t("meetingDesign.constraintLabels.remote"),inPerson:this.$t("meetingDesign.constraintLabels.inPerson"),hybrid:this.$t("meetingDesign.constraintLabels.hybrid"),largeGroup:this.$t("meetingDesign.constraintLabels.largeGroup"),smallGroup:this.$t("meetingDesign.constraintLabels.smallGroup"),timeboxed:this.$t("meetingDesign.constraintLabels.timeboxed"),interactive:this.$t("meetingDesign.constraintLabels.interactive"),presentation:this.$t("meetingDesign.constraintLabels.presentation")},await this.loadDesigns(),await this.loadTeams()},methods:{async loadDesigns(){try{this.loading=!0;const e=localStorage.getItem("token"),t=await he.A.get("/api/meeting-design",{headers:{Authorization:`Bearer ${e}`}});this.designs=t.data}catch(e){console.error("Error loading designs:",e),this.error=this.$t("meetingDesign.errorLoading")}finally{this.loading=!1}},async loadTeams(){try{const e=localStorage.getItem("token"),t=await he.A.get("/api/teams",{headers:{Authorization:`Bearer ${e}`}});this.teams=t.data}catch(e){console.error("Error loading teams:",e)}},async generateDesign(){try{this.generating=!0;const e=localStorage.getItem("token"),t=this.selectedConstraints.length>0?this.selectedConstraints.map((e=>this.constraintLabels[e])).join(", ")+(this.newDesign.constraints?". "+this.newDesign.constraints:""):this.newDesign.constraints,n={...this.newDesign,constraints:t,team_id:this.newDesign.team_id||null},i=await he.A.post("/api/meeting-design/generate",n,{headers:{Authorization:`Bearer ${e}`}});this.designs.unshift(i.data),this.closeCreateModal(),this.viewDesign(i.data)}catch(e){console.error("Error generating design:",e),this.error=this.$t("meetingDesign.errorGenerating")}finally{this.generating=!1}},async regenerateBlock(e){try{this.regenerating=e;const t=localStorage.getItem("token"),n=await he.A.post("/api/meeting-design/regenerate-block",{design_id:this.currentDesign.id,block_index:e},{headers:{Authorization:`Bearer ${t}`}});this.currentDesign.blocks[e]=n.data.block;const i=this.designs.findIndex((e=>e.id===this.currentDesign.id));-1!==i&&(this.designs[i]=n.data.design)}catch(t){console.error("Error regenerating block:",t),this.error=this.$t("meetingDesign.errorRegenerating")}finally{this.regenerating=null}},async saveDesign(){try{this.saving=!0;const e=localStorage.getItem("token");await he.A.put(`/api/meeting-design/${this.currentDesign.id}`,{title:this.currentDesign.title,goal:this.currentDesign.goal,constraints:this.currentDesign.constraints,blocks:this.currentDesign.blocks},{headers:{Authorization:`Bearer ${e}`}}),alert(this.$t("meetingDesign.designSaved"))}catch(e){console.error("Error saving design:",e),this.error=this.$t("meetingDesign.errorSaving")}finally{this.saving=!1}},async deleteDesign(e){if(confirm(this.$t("meetingDesign.confirmDelete")))try{const t=localStorage.getItem("token");await he.A.delete(`/api/meeting-design/${e}`,{headers:{Authorization:`Bearer ${t}`}}),this.designs=this.designs.filter((t=>t.id!==e)),alert(this.$t("meetingDesign.designDeleted"))}catch(t){console.error("Error deleting design:",t),this.error=this.$t("meetingDesign.errorSaving")}},async exportPdf(e){try{const t=localStorage.getItem("token"),n=await he.A.get(`/api/meeting-design/${e}/pdf`,{headers:{Authorization:`Bearer ${t}`},responseType:"blob"}),i=window.URL.createObjectURL(new Blob([n.data])),s=document.createElement("a");s.href=i,s.setAttribute("download",`meeting-design-${e}.pdf`),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(i)}catch(t){console.error("Error exporting PDF:",t),this.error="Ошибка экспорта PDF"}},viewDesign(e){this.currentDesign={...e},this.showViewModal=!0},editBlock(e){this.editingBlock={...this.currentDesign.blocks[e]},this.editingBlockIndex=e,this.showEditModal=!0},saveBlockEdit(){this.currentDesign.blocks[this.editingBlockIndex]={...this.editingBlock},this.showEditModal=!1,this.editingBlock=null,this.editingBlockIndex=null},closeCreateModal(){this.showCreateModal=!1,this.newDesign={title:"",meeting_type:"retrospective",goal:"",duration_minutes:60,team_id:"",constraints:""},this.selectedConstraints=[]}}},De=n(1241);const Le=(0,De.A)(pe,[["render",ve],["__scopeId","data-v-514b7ce8"]]);var be=Le}}]);
//# sourceMappingURL=617.1edc2b05.js.map